(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{pQie:function(t,e,n){"use strict";n.r(e),n.d(e,"StudentsModule",function(){return Z});var s=n("ofXK"),a=n("3Pt+"),r=n("tyNb"),c=n("EY2u"),b=n("lJxs"),o=n("JIr8"),i=n("AytR"),l=n("YNhY"),d=n("XIlG"),u=n("fXoL"),m=n("sYmb"),g=n("n90K"),p=n("Ghzu"),h=n("Avbo"),f=n("VQPA");function v(t,e){if(1&t&&(u.Ob(0,"div",16),u.Ob(1,"div",17),u.Ob(2,"div",18),u.uc(3),u.Nb(),u.Kb(4,"img",19),u.Ob(5,"div",20),u.Ob(6,"p",21),u.uc(7),u.Nb(),u.Nb(),u.Nb(),u.Nb()),2&t){const t=e.$implicit;u.xb(2),u.cc("title",t.getName()),u.xb(1),u.wc(" ",t.getName()," "),u.xb(1),u.cc("src",(null==t?null:t.getImageUrl())||"assets/images/avatar-blank.png",u.oc),u.xb(3),u.wc(" ",t.getEmail()," ")}}function N(t,e){if(1&t&&(u.Ob(0,"div",13),u.Ob(1,"div",14),u.sc(2,v,8,4,"div",15),u.Nb(),u.Nb()),2&t){const t=u.Xb().ngIf;u.xb(2),u.cc("ngForOf",t)}}function x(t,e){1&t&&(u.Ob(0,"div",22),u.uc(1),u.Yb(2,"translate"),u.Nb()),2&t&&(u.xb(1),u.wc(" ",u.Zb(2,1,"global.messages.nothing-found")," "))}function O(t,e){if(1&t&&(u.Ob(0,"div",2),u.Ob(1,"div",3),u.sc(2,N,3,1,"div",11),u.sc(3,x,3,3,"ng-template",null,12,u.tc),u.Nb(),u.Nb()),2&t){const t=u.kc(4),e=u.Xb();u.xb(2),u.cc("ngIf",!e.hasError&&0!==e.recordsCount)("ngIfElse",t)}}function w(t,e){1&t&&(u.Ob(0,"span"),u.uc(1),u.Yb(2,"translate"),u.Yb(3,"translate"),u.Nb()),2&t&&(u.xb(1),u.xc(" ",u.Zb(2,2,"global.messages.loading")," ",u.Zb(3,4,"global.menu-links.students")," ... "))}function y(t,e){if(1&t&&(u.Ob(0,"div",22),u.sc(1,w,4,6,"span",23),u.Nb()),2&t){const t=u.Xb(),e=u.kc(21);u.xb(1),u.cc("ngIf",!t.hasError)("ngIfElse",e)}}function E(t,e){if(1&t){const t=u.Pb();u.Ob(0,"span"),u.uc(1),u.Yb(2,"translate"),u.Nb(),u.Ob(3,"button",24),u.Vb("click",function(){return u.mc(t),u.Xb().onSearch()}),u.uc(4),u.Yb(5,"translate"),u.Nb()}2&t&&(u.xb(1),u.wc(" ",u.Zb(2,2,"global.messages.system-error")," "),u.xb(3),u.wc(" ",u.Zb(5,4,"global.buttons.reload")," "))}const I=[{path:"",component:(()=>{class t extends d.a{constructor(t,e,n,s,a){super(t,e,a),this.translateService=t,this.storageService=e,this.studentService=n,this.imageUtilService=s,this.modalService=a,this.globalHeader="global.menu-links.students"}ngOnInit(){this.params=this.params.set("name",""),this.records$=this.loadData(this.params)}onDelete(){}onUpdate(){}onSearch(){this.hasError=!1,this.recordsCount=0;let t=this.queryField.value;t=t||"",this.params=this.params.set("name",t),this.records$=this.loadData(this.params)}loadData(t){return this.studentService.findAllByName(t).pipe(Object(b.a)(t=>(this.recordsCount=t.length,t.map(t=>{this.hasError=!1;const e=new l.a;Object.assign(e,t);let n=i.a.BUCKET_BASE_URL;n+=`/${this.imageUtilService.buildFileName(e.getName())}.jpg`,e.setImageUrl(n);const s=document.createElement("img");return s.src=n,s.addEventListener("error",()=>e.setImageUrl(i.a.DEFAULT_AVATAR_IMG)),e}))),Object(o.a)(()=>(this.hasError=!0,this.error$.next(!0),this.handleError(this.modalTexts.error.title,this.modalTexts.loading.body),c.a)))}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(m.d),u.Jb(g.a),u.Jb(p.a),u.Jb(h.a),u.Jb(f.a))},t.\u0275cmp=u.Db({type:t,selectors:[["app-students-list"]],features:[u.ub],decls:22,vars:14,consts:[[1,"card-box","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[1,"row"],[1,"col-12"],[1,"input-group","mb-3"],["type","text",1,"form-control",3,"formControl","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"click"],["class","row",4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["class","card-container",4,"ngIf","ngIfElse"],["emptyTemplate",""],[1,"card-container"],[1,"row","row-cols-1","row-cols-md-4"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"col","mb-4"],[1,"card","card-list-item"],[1,"card-header","card-name",3,"title"],["alt","student",1,"m-2","img-fluid",3,"src"],[1,"card-body"],[1,"card-text"],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(t,e){if(1&t&&(u.Ob(0,"article",0),u.Ob(1,"header"),u.Ob(2,"h1",1),u.uc(3),u.Yb(4,"translate"),u.Nb(),u.Nb(),u.Kb(5,"hr"),u.Ob(6,"div",2),u.Ob(7,"div",3),u.Ob(8,"div",4),u.Kb(9,"input",5),u.Yb(10,"translate"),u.Ob(11,"div",6),u.Ob(12,"button",7),u.Vb("click",function(){return e.onSearch()}),u.uc(13),u.Yb(14,"translate"),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Kb(15,"hr"),u.sc(16,O,5,2,"div",8),u.Yb(17,"async"),u.sc(18,y,2,2,"ng-template",null,9,u.tc),u.sc(20,E,6,6,"ng-template",null,10,u.tc),u.Nb()),2&t){const t=u.kc(19);u.xb(3),u.wc(" ",u.Zb(4,6,e.globalHeader)," "),u.xb(6),u.cc("formControl",e.queryField)("placeholder",u.Zb(10,8,"global.messages.search-for-name")),u.xb(4),u.wc(" ",u.Zb(14,10,"global.buttons.search")," "),u.xb(3),u.cc("ngIf",u.Zb(17,12,e.records$))("ngIfElse",t)}},directives:[a.a,a.o,a.e,s.l,s.k],pipes:[m.c,s.b],encapsulation:2}),t})()}];let k=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[r.f.forChild(I)],r.f]}),t})();var S=n("tZSt"),Y=n("PCNd");let Z=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[s.c,k,a.r,a.j,S.a,Y.a]]}),t})()}}]);
//# sourceMappingURL=18-es2015.a9dd55d0a32850f45bd4.js.map