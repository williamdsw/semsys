(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Qz0R:function(e,t,s){"use strict";s.r(t),s.d(t,"CoursesModule",function(){return D});var o=s("ofXK"),c=s("3Pt+"),r=s("tyNb"),i=s("EY2u"),n=s("IzEk"),b=s("eIep"),l=s("lJxs"),a=s("JIr8"),u=s("VLk4"),d=s("1w29"),h=s("fXoL"),m=s("sYmb"),p=s("VQPA"),g=s("n90K"),f=s("VEcs"),w=s("ej43");function v(e,t){if(1&e&&(h.Ob(0,"option",25),h.uc(1),h.Yb(2,"translate"),h.Nb()),2&e){const e=t.$implicit,s=t.index,o=h.Xb();h.cc("value",e),h.xb(1),h.wc(" ",h.Zb(2,2,o.periodDescriptions[s])," ")}}function O(e,t){if(1&e&&(h.Ob(0,"th",34),h.uc(1),h.Yb(2,"translate"),h.Nb()),2&e){const e=t.$implicit;h.xb(1),h.wc(" ",h.Zb(2,1,e)," ")}}function x(e,t){if(1&e){const e=h.Pb();h.Ob(0,"div"),h.Ob(1,"input",39),h.Vb("click",function(){h.mc(e);const t=h.Xb().$implicit;return h.Xb(3).toggleButtons(t)}),h.Nb(),h.Nb()}}function N(e,t){if(1&e){const e=h.Pb();h.Ob(0,"td",35),h.Ob(1,"button",40),h.Vb("click",function(){h.mc(e);const t=h.Xb().$implicit;return h.Xb(3).showNewSchoolClass(t)}),h.uc(2),h.Yb(3,"translate"),h.Nb(),h.Nb()}2&e&&(h.xb(2),h.wc(" ",h.Zb(3,1,"course.classes.new")," "))}function y(e,t){if(1&e){const e=h.Pb();h.Ob(0,"tr"),h.Ob(1,"td",35),h.sc(2,x,2,0,"div",36),h.Nb(),h.Ob(3,"td",35),h.uc(4),h.Nb(),h.Ob(5,"td",35),h.uc(6),h.Yb(7,"translate"),h.Nb(),h.Ob(8,"td",35),h.uc(9),h.Yb(10,"translate"),h.Nb(),h.Ob(11,"td",35),h.Ob(12,"button",37),h.Vb("click",function(){h.mc(e);const s=t.$implicit;return h.Xb(3).showSchoolClasses(s)}),h.uc(13),h.Yb(14,"translate"),h.Nb(),h.Nb(),h.sc(15,N,4,3,"td",38),h.Nb()}if(2&e){const e=t.$implicit,s=h.Xb(3);h.xb(2),h.cc("ngIf",s.containsProfile("ADMIN")),h.xb(2),h.wc(" ",e.getName()," "),h.xb(2),h.wc(" ",h.Zb(7,6,s.getTranslatedPeriod(e.getPeriod()))," "),h.xb(3),h.wc(" ",h.Zb(10,8,s.getTranslatedCourseType(e.getType()))," "),h.xb(4),h.wc(" ",h.Zb(14,10,"course.classes.list")," "),h.xb(2),h.cc("ngIf",s.containsProfile("ADMIN"))}}function S(e,t){if(1&e&&(h.Ob(0,"div",29),h.Ob(1,"table",30),h.Ob(2,"thead"),h.Ob(3,"tr"),h.sc(4,O,3,3,"th",31),h.Ob(5,"th",32),h.uc(6),h.Yb(7,"translate"),h.Nb(),h.Nb(),h.Nb(),h.Ob(8,"tbody"),h.sc(9,y,16,12,"tr",33),h.Nb(),h.Nb(),h.Nb()),2&e){const e=h.Xb().ngIf,t=h.Xb();h.xb(4),h.cc("ngForOf",t.tableHeaders),h.xb(1),h.cc("colSpan",t.containsProfile("ADMIN")?2:1),h.xb(1),h.wc(" ",h.Zb(7,4,"course.classes.classes")," "),h.xb(3),h.cc("ngForOf",e)}}function I(e,t){if(1&e&&(h.Ob(0,"div",26),h.Ob(1,"div",27),h.sc(2,S,10,6,"div",28),h.Nb(),h.Nb()),2&e){const e=t.ngIf,s=h.Xb(),o=h.kc(46);h.xb(2),h.cc("ngIf",!s.hasError&&0!==e.length)("ngIfElse",o)}}function k(e,t){if(1&e){const e=h.Pb();h.Ob(0,"div",41),h.Ob(1,"div",42),h.Ob(2,"button",43),h.Vb("click",function(){return h.mc(e),h.Xb().onDelete()}),h.uc(3),h.Yb(4,"translate"),h.Nb(),h.Nb(),h.Ob(5,"div",44),h.Ob(6,"button",45),h.Vb("click",function(){return h.mc(e),h.Xb().showNewCourseModal()}),h.uc(7),h.Yb(8,"translate"),h.Nb(),h.Nb(),h.Nb()}if(2&e){const e=h.Xb();h.xb(2),h.cc("disabled",!e.isSelected),h.xb(1),h.wc(" ",h.Zb(4,3,"global.buttons.delete")," "),h.xb(4),h.wc(" ",h.Zb(8,5,"global.buttons.new-course")," ")}}function P(e,t){1&e&&(h.Ob(0,"span"),h.uc(1),h.Yb(2,"translate"),h.Yb(3,"translate"),h.Nb()),2&e&&(h.xb(1),h.xc(" ",h.Zb(2,2,"global.messages.loading")," ",h.Zb(3,4,"global.menu-links.courses")," ... "))}function T(e,t){if(1&e&&(h.Ob(0,"div",46),h.sc(1,P,4,6,"span",47),h.Nb()),2&e){const e=h.Xb(),t=h.kc(44);h.xb(1),h.cc("ngIf",!e.hasError)("ngIfElse",t)}}function Y(e,t){if(1&e){const e=h.Pb();h.Ob(0,"span"),h.uc(1),h.Yb(2,"translate"),h.Nb(),h.Ob(3,"button",48),h.Vb("click",function(){return h.mc(e),h.Xb().onReload()}),h.uc(4),h.Yb(5,"translate"),h.Nb()}2&e&&(h.xb(1),h.wc(" ",h.Zb(2,2,"global.messages.system-error")," "),h.xb(3),h.wc(" ",h.Zb(5,4,"global.buttons.reload")," "))}function A(e,t){1&e&&(h.Ob(0,"div",46),h.Ob(1,"span"),h.uc(2),h.Yb(3,"translate"),h.Nb(),h.Nb()),2&e&&(h.xb(2),h.wc(" ",h.Zb(3,1,"global.messages.nothing-found")," "))}const F=[{path:"",component:(()=>{class e extends d.a{constructor(e,t,s,o,c){super(e,s,t),this.translateService=e,this.modalService=t,this.storageService=s,this.courseService=o,this.authenticationService=c,this.currentFilter="all",this.timePeriods=[],this.periodDescriptions=[],this.isSelected=!1,this.globalHeader="global.menu-links.courses",this.confirmBody="course.messages.confirmation",this.tableHeaders=["","global.personal.name","course.period.period","course.type.type"],this.timePeriods=this.courseService.listTimePeriods(),this.periodDescriptions=this.courseService.getPeriodDescriptions()}ngOnInit(){this.onReload()}onUpdate(){}onReload(){this.hasError=!1,this.records$=this.loadData("ALL")}onDelete(){const e=this.modalService.showConfirm(this.modalTexts.confirm.title,this.modalTexts.confirm.body);e.asObservable().pipe(Object(n.a)(1),Object(b.a)(e=>e?this.courseService.deleteCourse(this.selectedModel.getId()):i.a)).subscribe(()=>{this.isSelected=!1,this.records$=this.loadData("ALL"),this.modalService.showAlertSuccess(this.modalTexts.success.title,this.modalTexts.success.body)},()=>this.modalService.showAlertDanger(this.modalTexts.error.title,this.modalTexts.error.body),()=>e.unsubscribe())}loadData(e,t){switch(e){case"period":return this.pipeFindAll(this.courseService.findByKeyAndValueWhereUrlIs("value",t,this.courseService.protectedUrl+"/period"));case"name":return this.pipeFindAll(this.courseService.findByKeyAndValueWhereUrlIs("name",t,this.courseService.protectedUrl+"/name"));case"all":default:return this.pipeFindAll(this.courseService.findAll())}}pipeFindAll(e){return e.pipe(Object(l.a)(e=>e.map(e=>{this.hasError=!1;let t=new u.a;return t=Object.assign(t,e),t})),Object(a.a)(()=>(this.hasError=!0,this.error$.next(!0),this.handleError(this.modalTexts.error.title,this.modalTexts.loading.body),i.a)))}toggleButtons(e){this.selectedModel=e,this.isSelected=!0}toggleFilter(e,t){this.currentFilter=e,this.records$=this.loadData(e,t="period"===e&&""===t?"Morning":t)}showSchoolClasses(e){this.modalService.showSchoolClass(e)}showNewCourseModal(){const e=this.modalService.showNewCourse();e.asObservable().pipe(Object(n.a)(1)).subscribe(e=>{e?(this.modalService.showAlertSuccess(this.modalTexts.success.title,"course.messages.course-success"),this.records$=this.loadData()):this.modalService.showAlertDanger(this.modalTexts.error.title,"course.messages.course-error")},()=>this.modalService.showAlertDanger(this.modalTexts.error.title,"course.messages.course-error"),()=>e.unsubscribe())}showNewSchoolClass(e){const t=this.modalService.showNewSchoolClass(e);t.asObservable().subscribe(e=>{e?this.modalService.showAlertSuccess(this.modalTexts.success.title,"classes.messages.class-success"):this.modalService.showAlertDanger(this.modalTexts.error.title,"classes.messages.class-error")},()=>this.modalService.showAlertDanger(this.modalTexts.error.title,"classes.messages.class-error"),()=>t.unsubscribe())}getTranslatedPeriod(e){return this.courseService.getTranslatedPeriod(e)}getTranslatedCourseType(e){return this.courseService.getTranslatedCourseType(e)}containsProfile(e){return this.authenticationService.containsProfile(e)}}return e.\u0275fac=function(t){return new(t||e)(h.Jb(m.d),h.Jb(p.a),h.Jb(g.a),h.Jb(f.a),h.Jb(w.a))},e.\u0275cmp=h.Db({type:e,selectors:[["app-courses-list"]],features:[h.ub],decls:47,vars:29,consts:[[1,"table-box","w-100","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[1,"form-row","mb-3"],[1,"col-lg-3","col-md-4","my-2","my-md-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"form-control",3,"change"],["filterCombo",""],["value","all","selected",""],["value","period"],["value","name"],[1,"col-lg-2","col-md-3","my-2","my-md-0",3,"hidden"],["periodCombo",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-9","col-md-8","my-2","my-md-0",3,"hidden"],["type","text",1,"form-control",3,"placeholder"],["nameInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"click"],["class","row",4,"ngIf","ngIfElse"],["class","row mt-2",4,"ngIf"],["spanLoading",""],["spanError",""],["nothingFound",""],[3,"value"],[1,"row"],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col",4,"ngFor","ngForOf"],[1,"text-center",3,"colSpan"],[4,"ngFor","ngForOf"],["scope","col"],["scope","row"],[4,"ngIf"],["type","button",1,"btn","btn-outline-info",3,"click"],["scope","row",4,"ngIf"],["type","radio","name","id",1,"custom-radio",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"row","mt-2"],[1,"col-lg-2","col-sm-3","my-md-0","my-2"],["type","button",1,"btn","btn-danger","w-100",3,"disabled","click"],[1,"col-lg-2","col-md-3","col-sm-4","my-md-0","my-2"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(e,t){if(1&e){const e=h.Pb();h.Ob(0,"article",0),h.Ob(1,"header"),h.Ob(2,"h1",1),h.uc(3),h.Yb(4,"translate"),h.Nb(),h.Nb(),h.Kb(5,"hr"),h.Ob(6,"div",2),h.Ob(7,"div",3),h.Ob(8,"div",4),h.Ob(9,"div",5),h.Ob(10,"span",6),h.uc(11),h.Yb(12,"translate"),h.Nb(),h.Nb(),h.Ob(13,"select",7,8),h.Vb("change",function(){h.mc(e);const s=h.kc(14);return t.toggleFilter(s.value,"")}),h.Ob(15,"option",9),h.uc(16),h.Yb(17,"translate"),h.Nb(),h.Ob(18,"option",10),h.uc(19),h.Yb(20,"translate"),h.Nb(),h.Ob(21,"option",11),h.uc(22),h.Yb(23,"translate"),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(24,"div",12),h.Ob(25,"select",7,13),h.Vb("change",function(){h.mc(e);const s=h.kc(26);return t.toggleFilter("period",s.value)}),h.sc(27,v,3,4,"option",14),h.Nb(),h.Nb(),h.Ob(28,"div",15),h.Ob(29,"div",4),h.Kb(30,"input",16,17),h.Yb(32,"translate"),h.Ob(33,"div",18),h.Ob(34,"button",19),h.Vb("click",function(){h.mc(e);const s=h.kc(31);return t.toggleFilter("name",s.value)}),h.uc(35),h.Yb(36,"translate"),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.sc(37,I,3,2,"div",20),h.Yb(38,"async"),h.Kb(39,"hr"),h.sc(40,k,9,7,"div",21),h.sc(41,T,2,2,"ng-template",null,22,h.tc),h.sc(43,Y,6,6,"ng-template",null,23,h.tc),h.sc(45,A,4,3,"ng-template",null,24,h.tc),h.Nb()}if(2&e){const e=h.kc(42);h.xb(3),h.wc(" ",h.Zb(4,13,t.globalHeader)," "),h.xb(8),h.wc(" ",h.Zb(12,15,"course.filter")," "),h.xb(5),h.wc(" ",h.Zb(17,17,"global.other.all")," "),h.xb(3),h.wc(" ",h.Zb(20,19,"course.period.period")," "),h.xb(3),h.wc(" ",h.Zb(23,21,"global.personal.name")," "),h.xb(2),h.cc("hidden","period"!==t.currentFilter),h.xb(3),h.cc("ngForOf",t.timePeriods),h.xb(1),h.cc("hidden","name"!==t.currentFilter),h.xb(2),h.cc("placeholder",h.Zb(32,23,"global.personal.name")),h.xb(5),h.wc(" ",h.Zb(36,25,"global.buttons.search")," "),h.xb(2),h.cc("ngIf",h.Zb(38,27,t.records$))("ngIfElse",e),h.xb(3),h.cc("ngIf",t.containsProfile("ADMIN"))}},directives:[c.q,c.u,o.k,o.l],pipes:[m.c,o.b],styles:[".table-box[_ngcontent-%COMP%] { width: 120rem; }",".container[_ngcontent-%COMP%] { max-width: 1200px; }"]}),e})()}];let Z=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(t){return new(t||e)},imports:[[r.f.forChild(F)],r.f]}),e})();var C=s("PCNd");let D=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(t){return new(t||e)},imports:[[o.c,c.r,Z,C.a]]}),e})()}}]);
//# sourceMappingURL=7-es2015.c9b4532173011dc84bc5.js.map