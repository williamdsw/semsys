!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,s=o(e);if(t){var r=o(this).constructor;n=Reflect.construct(s,arguments,r)}else n=s.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{PByI:function(c,o,r){"use strict";r.r(o),r.d(o,"MeetingSchedulesModule",function(){return K});var i=r("ofXK"),l=r("3Pt+"),a=r("tyNb"),u=r("EY2u"),b=r("IzEk"),d=r("eIep"),f=r("lJxs"),g=r("JIr8"),h=r("vakP"),m=r("5soc"),p=r("YNhY"),v=function(e){return e.SCHEDULED="Scheduled",e.FINISHED="Finished",e.CANCELED="Canceled",e}({}),y=r("1w29"),O=r("fXoL"),w=r("sYmb"),S=r("VQPA"),x=r("n90K"),N=r("ej43"),k=r("aSe2"),E=["cancelScheduleButton"],I=["newReportButton"];function D(e,t){if(1&e){var n=O.Pb();O.Ob(0,"div",16),O.Ob(1,"select",8,17),O.Vb("change",function(){O.mc(n);var e=O.kc(2),t=O.Xb(),s=O.kc(15);return t.toggleVisibility(e.value,s.value)}),O.Ob(3,"option",18),O.uc(4),O.Yb(5,"translate"),O.Yb(6,"translate"),O.Nb(),O.Ob(7,"option",19),O.uc(8),O.Yb(9,"translate"),O.Yb(10,"translate"),O.Nb(),O.Nb(),O.Nb()}2&e&&(O.xb(4),O.xc(" ",O.Zb(5,4,"global.other.all")," ",O.Zb(6,6,"global.menu-links.schedules")," "),O.xb(4),O.xc(" ",O.Zb(9,8,"global.other.my")," ",O.Zb(10,10,"global.menu-links.schedules")," "))}function P(e,t){if(1&e&&(O.Ob(0,"option",20),O.uc(1),O.Yb(2,"translate"),O.Nb()),2&e){var n=t.$implicit,s=t.index,c=O.Xb();O.cc("value",n),O.xb(1),O.wc(" ",O.Zb(2,2,c.statusDescriptions[s])," ")}}function M(e,t){if(1&e){var n=O.Pb();O.Ob(0,"div",4),O.Ob(1,"button",21),O.Vb("click",function(){return O.mc(n),O.Xb().showNewMeetingScheduleModal()}),O.uc(2),O.Yb(3,"translate"),O.Nb(),O.Nb()}if(2&e){var s=O.Xb();O.cc("hidden",s.isHidden),O.xb(2),O.wc(" ",O.Zb(3,2,"global.buttons.new-meeting-schedule")," ")}}function Y(e,t){if(1&e&&(O.Ob(0,"th",30),O.uc(1),O.Yb(2,"translate"),O.Nb()),2&e){var n=t.$implicit;O.xb(1),O.wc(" ",O.Zb(2,1,n)," ")}}function T(e,t){if(1&e){var n=O.Pb();O.Ob(0,"div"),O.Ob(1,"input",32),O.Vb("click",function(){O.mc(n);var e=O.Xb().$implicit;return O.Xb(3).toggleButtons(e)}),O.Nb(),O.Nb()}}function j(e,t){if(1&e&&(O.Ob(0,"tr"),O.Ob(1,"td",31),O.sc(2,T,2,0,"div",25),O.Nb(),O.Ob(3,"td",31),O.uc(4),O.Nb(),O.Ob(5,"td",31),O.uc(6),O.Nb(),O.Ob(7,"td",31),O.uc(8),O.Nb(),O.Ob(9,"td",31),O.Ob(10,"span"),O.uc(11),O.Yb(12,"translate"),O.Nb(),O.Nb(),O.Nb()),2&e){var n=t.$implicit,s=O.Xb(3),c=null,o=null;O.xb(2),O.cc("ngIf",s.containsProfile("ADMIN")&&!s.isHidden),O.xb(2),O.wc(" ",n.getDatetime()," "),O.xb(2),O.wc(" ",null==(c=n.getEmployee())?null:c.getName()," "),O.xb(2),O.wc(" ",null==(o=n.getStudent())?null:o.getName()," "),O.xb(2),O.zb(s.setBagdeClass(n.getMeetingStatus())),O.xb(1),O.wc(" ",O.Zb(12,7,s.getTranslatedStatus(n.getMeetingStatus()))," ")}}function A(e,t){if(1&e&&(O.Ob(0,"div",26),O.Ob(1,"table",27),O.Ob(2,"thead"),O.Ob(3,"tr"),O.sc(4,Y,3,3,"th",28),O.Nb(),O.Nb(),O.Ob(5,"tbody"),O.sc(6,j,13,9,"tr",29),O.Nb(),O.Nb(),O.Nb()),2&e){var n=O.Xb().ngIf,s=O.Xb();O.xb(4),O.cc("ngForOf",s.tableHeaders),O.xb(2),O.cc("ngForOf",n)}}function B(e,t){if(1&e){var n=O.Pb();O.Ob(0,"div"),O.Ob(1,"div",33),O.Ob(2,"div",34),O.Ob(3,"button",35,36),O.Vb("click",function(){return O.mc(n),O.Xb(2).onUpdate()}),O.uc(5),O.Yb(6,"translate"),O.Nb(),O.Nb(),O.Ob(7,"div",37),O.Ob(8,"button",38,39),O.Vb("click",function(){return O.mc(n),O.Xb(2).showNewReportModal()}),O.uc(10),O.Yb(11,"translate"),O.Nb(),O.Nb(),O.Nb(),O.Nb()}if(2&e){var s=O.Xb(2);O.xb(1),O.cc("hidden",s.isHidden),O.xb(4),O.wc(" ",O.Zb(6,3,"meeting-schedules.buttons.cancel-schedule")," "),O.xb(5),O.wc(" ",O.Zb(11,5,"global.buttons.new-report")," ")}}function Z(e,t){if(1&e&&(O.Ob(0,"div",22),O.Ob(1,"div",23),O.sc(2,A,7,2,"div",24),O.sc(3,B,12,7,"div",25),O.Nb(),O.Nb()),2&e){var n=t.ngIf,s=O.Xb(),c=O.kc(25);O.xb(2),O.cc("ngIf",!s.hasError&&0!==n.length)("ngIfElse",c),O.xb(1),O.cc("ngIf",s.containsProfile("EMPLOYEE")&&0!==n.length)}}function R(e,t){1&e&&(O.Ob(0,"span"),O.uc(1),O.Yb(2,"translate"),O.Yb(3,"translate"),O.Nb()),2&e&&(O.xb(1),O.xc(" ",O.Zb(2,2,"global.messages.loading")," ",O.Zb(3,4,"global.menu-links.schedules")," ... "))}function C(e,t){if(1&e&&(O.Ob(0,"div",40),O.sc(1,R,4,6,"span",41),O.Nb()),2&e){var n=O.Xb(),s=O.kc(23);O.xb(1),O.cc("ngIf",!n.hasError)("ngIfElse",s)}}function F(e,t){if(1&e){var n=O.Pb();O.Ob(0,"span"),O.uc(1),O.Yb(2,"translate"),O.Nb(),O.Ob(3,"button",42),O.Vb("click",function(){return O.mc(n),O.Xb().onReload()}),O.uc(4),O.Yb(5,"translate"),O.Nb()}2&e&&(O.xb(1),O.wc(" ",O.Zb(2,2,"global.messages.system-error")," "),O.xb(3),O.wc(" ",O.Zb(5,4,"global.buttons.reload")," "))}function X(e,t){1&e&&(O.Ob(0,"div",40),O.Ob(1,"span"),O.uc(2),O.Yb(3,"translate"),O.Nb(),O.Nb()),2&e&&(O.xb(2),O.wc(" ",O.Zb(3,1,"global.messages.nothing-found")," "))}var H,$,_,V=[{path:"",component:(H=function(c){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(a,c);var o,r,i,l=s(a);function a(t,n,s,c,o){var r;return e(this,a),(r=l.call(this,t,s,n)).translateService=t,r.modalService=n,r.storageService=s,r.authenticationService=c,r.meetingScheduleService=o,r.isHidden=!0,r.statusDescriptions=["global.other.all","meeting-schedules.status.scheduled","meeting-schedules.status.finished","meeting-schedules.status.canceled"],r.globalHeader="global.menu-links.schedules",r.modalTexts.confirm.body="meeting-schedules.messages.cancel-confirmation",r.modalTexts.success.body="meeting-schedules.messages.cancel-success",r.modalTexts.error.body="meeting-schedules.messages.cancel-error",r.tableHeaders=["#","meeting-schedules.datetime","meeting-schedules.employee","meeting-schedules.student","meeting-schedules.status.status"],Object.assign(r._localUser,s.getLocalUser()),r}return o=a,(r=[{key:"ngOnInit",value:function(){this.onReload()}},{key:"onDelete",value:function(){}},{key:"onReload",value:function(){this.hasError=!1,this.records$=this.loadData(),this.toggleVisibility("my","")}},{key:"onUpdate",value:function(){var e=this;this.modalService.showConfirm(this.modalTexts.confirm.title,this.modalTexts.confirm.body).asObservable().pipe(Object(b.a)(1),Object(d.a)(function(t){return t?(e.selectedModel.setMeetingStatus("Canceled"),e.meetingScheduleService.updateStatus(e.selectedModel)):u.a})).subscribe(function(){e.records$=e.loadData(e.currentStatus),e.modalService.showAlertSuccess(e.modalTexts.success.title,e.modalTexts.success.body)},function(){return e.modalService.showAlertDanger(e.modalTexts.error.title,e.modalTexts.error.body)})}},{key:"loadData",value:function(e){return this.currentStatus=e,e?this.pipeFindAll("All"!==e?this.meetingScheduleService.findAllByStatus(e):this.meetingScheduleService.findAll()):"Employee"===this._localUser.getType()?this.pipeFindAll(this.meetingScheduleService.findAllByEmployee(this._localUser.getId())):"Student"===this._localUser.getType()?this.pipeFindAll(this.meetingScheduleService.findAllByStudent(this._localUser.getId())):void 0}},{key:"pipeFindAll",value:function(e){var t=this;return e.pipe(Object(f.a)(function(e){return e.map(function(e){t.hasError=!1;var n=new h.a,s=new m.a,c=new p.a;return n=Object.assign(n,e),s=Object.assign(s,n.getEmployee()),c=Object.assign(c,n.getStudent()),n.setEmployee(s),n.setStudent(c),n})}),Object(g.a)(function(){return t.hasError=!0,t.error$.next(!0),t.handleError(t.modalTexts.error.title,t.modalTexts.loading.body),u.a}))}},{key:"setBagdeClass",value:function(e){switch(e){case"Finished":return"badge badge-success";case"Canceled":return"badge badge-danger";case"Scheduled":default:return"badge badge-primary"}}},{key:"toggleButtons",value:function(e){this.selectedModel=e,this.localCancelScheduleButton.nativeElement.disabled="Scheduled"!==e.getMeetingStatus(),this.localNewReportButton.nativeElement.disabled="Scheduled"!==e.getMeetingStatus()}},{key:"listMeetingStatus",value:function(){var e=["All"];for(var t in v)v.hasOwnProperty(t)&&e.push(v[t]);return e}},{key:"toggleVisibility",value:function(e,t){this.isHidden="all"===e,"all"===e&&""!==t?this.records$=this.loadData(t):"my"===e&&(this.records$=this.loadData())}},{key:"filterStatus",value:function(e){this.records$=this.loadData(e)}},{key:"showNewMeetingScheduleModal",value:function(){var e=this;this.modalService.showNewMeetingSchedule().asObservable().pipe(Object(b.a)(1)).subscribe(function(t){t?(e.modalService.showAlertSuccess(e.modalTexts.success.title,"meeting-schedules.messages.scheduled-success"),e.records$=e.loadData()):e.modalService.showAlertDanger(e.modalTexts.error.title,"meeting-schedules.messages.scheduled-error")},function(){return e.modalService.showAlertDanger(e.modalTexts.success.title,"meeting-schedules.messages.scheduled-error")})}},{key:"showNewReportModal",value:function(){var e=this;this.modalService.showNewReport(this.selectedModel).asObservable().pipe(Object(b.a)(1)).subscribe(function(t){t?(e.modalService.showAlertSuccess(e.modalTexts.success.title,"report.messages.report-success"),e.records$=e.loadData()):e.modalService.showAlertDanger(e.modalTexts.error.title,"report.messages.report-error")},function(){return e.modalService.showAlertDanger(e.modalTexts.error.title,"report.messages.report-error")})}},{key:"containsProfile",value:function(e){return this.authenticationService.containsProfile(e)}},{key:"getTranslatedStatus",value:function(e){var t="meeting-schedules.status."+e.toLowerCase(),n=this.statusDescriptions.indexOf(t);return this.statusDescriptions[n]}},{key:"cancelScheduleButton",set:function(e){this.localCancelScheduleButton=e}},{key:"newReportButton",set:function(e){this.localNewReportButton=e}}])&&t(o.prototype,r),i&&t(o,i),a}(y.a),H.\u0275fac=function(e){return new(e||H)(O.Jb(w.d),O.Jb(S.a),O.Jb(x.a),O.Jb(N.a),O.Jb(k.a))},H.\u0275cmp=O.Db({type:H,selectors:[["app-meeting-schedules-list"]],viewQuery:function(e,t){var n;1&e&&(O.Bc(E,!0),O.Bc(I,!0)),2&e&&(O.jc(n=O.Wb())&&(t.cancelScheduleButton=n.first),O.jc(n=O.Wb())&&(t.newReportButton=n.first))},features:[O.ub],decls:26,vars:14,consts:[[1,"table-box","w-100","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[1,"form-row","mb-3"],["class","col-md-3 col-sm-6 my-md-0 my-2",4,"ngIf"],[1,"col-md-4","col-sm-6","my-md-0","my-2",3,"hidden"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"form-control",3,"change"],["statusCombo",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-4 col-sm-6 my-md-0 my-2 ",3,"hidden",4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["nothingFound",""],[1,"col-md-3","col-sm-6","my-md-0","my-2"],["scheduleCombo",""],["value","all"],["value","my","selected",""],[3,"value"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"row"],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],["scope","row"],["type","radio","name","id",1,"custom-radio",3,"click"],[1,"row",3,"hidden"],[1,"col-lg-3","col-md-4","col-sm-6"],["type","button","disabled","",1,"btn","btn-danger","w-100","mt-2",3,"click"],["cancelScheduleButton",""],[1,"col-md-3","col-sm-6"],["type","button","disabled","",1,"btn","btn-primary","w-100","mt-2",3,"click"],["newReportButton",""],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(e,t){if(1&e){var n=O.Pb();O.Ob(0,"article",0),O.Ob(1,"header"),O.Ob(2,"h1",1),O.uc(3),O.Yb(4,"translate"),O.Nb(),O.Nb(),O.Kb(5,"hr"),O.Ob(6,"div",2),O.sc(7,D,11,12,"div",3),O.Ob(8,"div",4),O.Ob(9,"div",5),O.Ob(10,"div",6),O.Ob(11,"span",7),O.uc(12),O.Yb(13,"translate"),O.Nb(),O.Nb(),O.Ob(14,"select",8,9),O.Vb("change",function(){O.mc(n);var e=O.kc(15);return t.filterStatus(e.value)}),O.sc(16,P,3,4,"option",10),O.Nb(),O.Nb(),O.Nb(),O.sc(17,M,4,4,"div",11),O.Nb(),O.sc(18,Z,4,3,"div",12),O.Yb(19,"async"),O.sc(20,C,2,2,"ng-template",null,13,O.tc),O.sc(22,F,6,6,"ng-template",null,14,O.tc),O.sc(24,X,4,3,"ng-template",null,15,O.tc),O.Nb()}if(2&e){var s=O.kc(21);O.xb(3),O.wc(" ",O.Zb(4,8,t.globalHeader)," "),O.xb(4),O.cc("ngIf",t.containsProfile("ADMIN")),O.xb(1),O.cc("hidden",!t.isHidden),O.xb(4),O.wc(" ",O.Zb(13,10,"meeting-schedules.current-status")," "),O.xb(4),O.cc("ngForOf",t.listMeetingStatus()),O.xb(1),O.cc("ngIf",t.containsProfile("EMPLOYEE")),O.xb(1),O.cc("ngIf",O.Zb(19,12,t.records$))("ngIfElse",s)}},directives:[i.l,i.k,l.q,l.u],pipes:[w.c,i.b],encapsulation:2}),H)},{path:"new",component:r("JbS9").a}],J=(($=function t(){e(this,t)}).\u0275mod=O.Hb({type:$}),$.\u0275inj=O.Gb({factory:function(e){return new(e||$)},imports:[[a.f.forChild(V)],a.f]}),$),U=r("tZSt"),L=r("PCNd"),K=((_=function t(){e(this,t)}).\u0275mod=O.Hb({type:_}),_.\u0275inj=O.Gb({factory:function(e){return new(e||_)},imports:[[i.c,J,U.a,l.r,L.a]]}),_)}}])}();
//# sourceMappingURL=12-es5.8e0ebf7ac996f5f04d57.js.map