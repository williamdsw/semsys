(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{OwWB:function(e,t,r){"use strict";r.r(t),r.d(t,"LoginModule",function(){return x});var s=r("ofXK"),o=r("3Pt+"),i=r("tyNb"),a=r("AytR");class c{constructor(){}getSocialSecurityNumber(){return this.socialSecurityNumber}setSocialSecurityNumber(e){this.socialSecurityNumber=e}getPassword(){return this.password}setPassword(e){this.password=e}}var n=r("kpR/"),b=r("AqF/"),l=r("DC0s"),u=r("fXoL"),d=r("sYmb"),m=r("n90K"),p=r("VQPA"),h=r("ej43"),g=r("xaOb"),f=r("tmjD"),S=r("mrGz");const v=function(){return["/sign-up"]},w=function(){return["/forgot-password"]},N=[{path:"",component:(()=>{class e extends l.a{constructor(e,t,r,s,o,i,a,n){super(e,t,r,s),this.translateService=e,this.storageService=t,this.formBuilder=r,this.router=s,this.modalService=o,this.authenticationService=i,this.personService=a,this.route=n,this.model=new c}ngOnInit(){this.form=this.formBuilder.group({socialSecurityNumber:[null,[o.t.required]],password:[null,[o.t.required]]}),this.subscription$=this.route.params.subscribe(e=>{const t=e.socialSecurityNumber;null!=t&&this.form.patchValue({socialSecurityNumber:t})})}ngOnDestroy(){this.subscription$.unsubscribe()}submit(){this.model=Object.assign(this.model,this.form.value);const e=this.modalService.showWaitModal();setTimeout(()=>{this.subscription$=this.authenticationService.authenticate(this.model).subscribe(t=>{const r=t.headers.get("Authorization");this.authenticationService.successfulLogin(r);const s=new n.a;Object.assign(s,this.storageService.getLocalUser()),this.findLoggedUserInfo(s,e)},t=>{if(this.modalService.hideModal(e),t.error.message){const e=JSON.parse(t.error);this.modalService.showAlertDanger(e.error,e.message)}else this.modalService.showAlertDanger("modal.titles.attention","modal.messages.wrong-data")})},500)}showValidationModal(){}findLoggedUserInfo(e,t){this.subscription$=this.personService.findPersonBySSN(a.a.API+"/v1/public/persons/ssn",e.getSocialSecurityNumber()).subscribe(r=>{this.modalService.hideModal(t);const s=new b.a;Object.assign(s,r),e.setId(s.getId()),e.setType(s.getType()),e.setProfiles(s.getProfiles()),this.storageService.setLocalUser(e),this.router.navigate(["home"])},()=>{this.modalService.hideModal(t),this.modalService.showAlertDanger("modal.titles.error","modal.messages.ssn-not-found")})}}return e.\u0275fac=function(t){return new(t||e)(u.Jb(d.d),u.Jb(m.a),u.Jb(o.c),u.Jb(i.c),u.Jb(p.a),u.Jb(h.a),u.Jb(g.a),u.Jb(i.a))},e.\u0275cmp=u.Db({type:e,selectors:[["app-login"]],features:[u.ub],decls:37,vars:29,consts:[[1,"container"],[1,"box-wrapper","w-75","mx-auto","my-md-5","my-3","shadow-lg"],[1,"card"],[1,"card-body"],[1,"text-center"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-5"],[1,"form-group"],["type","text","id","ssnInput","minlength","11","maxlength","11","formControlName","socialSecurityNumber",1,"form-control",3,"placeholder","ngClass","mask","dropSpecialCharacters"],[3,"control","label"],["type","password","id","passwordInput","maxlength","20","formControlName","password",1,"form-control",3,"placeholder","ngClass"],[1,"col-md-2"],["type","button",1,"btn","btn-success","btn-block",3,"disabled","click"],["type","submit",1,"d-none"],["btnSubmit",""],[1,"card-footer"],[1,"col-md-6","col-4"],[3,"routerLink"],[1,"col-md-6","col-8"],[1,"float-right",3,"routerLink"]],template:function(e,t){if(1&e){const e=u.Pb();u.Ob(0,"article",0),u.Ob(1,"div",1),u.Ob(2,"div",2),u.Ob(3,"div",3),u.Ob(4,"header"),u.Ob(5,"h1",4),u.uc(6," S E M S Y S "),u.Nb(),u.Nb(),u.Kb(7,"hr"),u.Ob(8,"form",5),u.Vb("ngSubmit",function(){return t.onSubmit()}),u.Ob(9,"div",6),u.Ob(10,"div",7),u.Ob(11,"div",8),u.Kb(12,"input",9),u.Yb(13,"translate"),u.Kb(14,"app-error-message",10),u.Nb(),u.Nb(),u.Ob(15,"div",7),u.Ob(16,"div",8),u.Kb(17,"input",11),u.Yb(18,"translate"),u.Kb(19,"app-error-message",10),u.Nb(),u.Nb(),u.Ob(20,"div",12),u.Ob(21,"button",13),u.Vb("click",function(){return u.mc(e),u.kc(25).click()}),u.uc(22),u.Yb(23,"translate"),u.Nb(),u.Nb(),u.Nb(),u.Ob(24,"button",14,15),u.uc(26," Login "),u.Nb(),u.Nb(),u.Nb(),u.Ob(27,"div",16),u.Ob(28,"div",6),u.Ob(29,"div",17),u.Ob(30,"a",18),u.uc(31),u.Yb(32,"translate"),u.Nb(),u.Nb(),u.Ob(33,"div",19),u.Ob(34,"a",20),u.uc(35),u.Yb(36,"translate"),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb(),u.Nb()}2&e&&(u.xb(8),u.cc("formGroup",t.form),u.xb(4),u.cc("placeholder",u.Zb(13,17,"global.social-security-number"))("ngClass",t.buildValidationClass("socialSecurityNumber"))("mask",t.inputMasks.socialSecurityNumber)("dropSpecialCharacters",!1),u.xb(2),u.cc("control",t.form.get("socialSecurityNumber"))("label","Social Security Number"),u.xb(3),u.cc("placeholder",u.Zb(18,19,"global.password"))("ngClass",t.buildValidationClass("password")),u.xb(2),u.cc("control",t.form.get("password"))("label","Password"),u.xb(2),u.cc("disabled",!t.form.valid),u.xb(1),u.wc(" ",u.Zb(23,21,"global.buttons.login")," "),u.xb(8),u.cc("routerLink",u.ec(27,v)),u.xb(1),u.wc(" ",u.Zb(32,23,"global.buttons.sign-up")," "),u.xb(3),u.cc("routerLink",u.ec(28,w)),u.xb(1),u.wc(" ",u.Zb(36,25,"global.forgot-password")," "))},directives:[o.v,o.p,o.h,o.a,f.a,o.l,o.k,o.o,o.f,s.j,S.a,i.e],pipes:[d.c],encapsulation:2}),e})()}];let y=(()=>{class e{}return e.\u0275mod=u.Hb({type:e}),e.\u0275inj=u.Gb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(N)],i.f]}),e})();var O=r("PCNd");let x=(()=>{class e{}return e.\u0275mod=u.Hb({type:e}),e.\u0275inj=u.Gb({factory:function(t){return new(t||e)},imports:[[s.c,o.r,y,O.a]]}),e})()}}]);
//# sourceMappingURL=11-es2015.20a42657570399da6d09.js.map