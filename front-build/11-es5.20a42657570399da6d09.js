!function(){function e(t,r){return(e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(t,r)}function t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,i=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return r(this,n)}}function r(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{OwWB:function(r,o,i){"use strict";i.r(o),i.d(o,"LoginModule",function(){return D});var c,s,u,l=i("ofXK"),b=i("3Pt+"),f=i("tyNb"),d=i("AytR"),p=function(){function e(){n(this,e)}return a(e,[{key:"getSocialSecurityNumber",value:function(){return this.socialSecurityNumber}},{key:"setSocialSecurityNumber",value:function(e){this.socialSecurityNumber=e}},{key:"getPassword",value:function(){return this.password}},{key:"setPassword",value:function(e){this.password=e}}]),e}(),m=i("kpR/"),h=i("AqF/"),v=i("DC0s"),g=i("fXoL"),y=i("sYmb"),w=i("n90K"),S=i("VQPA"),N=i("ej43"),O=i("xaOb"),k=i("tmjD"),x=i("mrGz"),P=function(){return["/sign-up"]},j=function(){return["/forgot-password"]},C=[{path:"",component:(c=function(r){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&e(t,r)}(i,r);var o=t(i);function i(e,t,r,a,c,s,u,l){var b;return n(this,i),(b=o.call(this,e,t,r,a)).translateService=e,b.storageService=t,b.formBuilder=r,b.router=a,b.modalService=c,b.authenticationService=s,b.personService=u,b.route=l,b.model=new p,b}return a(i,[{key:"ngOnInit",value:function(){var e=this;this.form=this.formBuilder.group({socialSecurityNumber:[null,[b.t.required]],password:[null,[b.t.required]]}),this.subscription$=this.route.params.subscribe(function(t){var r=t.socialSecurityNumber;null!=r&&e.form.patchValue({socialSecurityNumber:r})})}},{key:"ngOnDestroy",value:function(){this.subscription$.unsubscribe()}},{key:"submit",value:function(){var e=this;this.model=Object.assign(this.model,this.form.value);var t=this.modalService.showWaitModal();setTimeout(function(){e.subscription$=e.authenticationService.authenticate(e.model).subscribe(function(r){var o=r.headers.get("Authorization");e.authenticationService.successfulLogin(o);var n=new m.a;Object.assign(n,e.storageService.getLocalUser()),e.findLoggedUserInfo(n,t)},function(r){if(e.modalService.hideModal(t),r.error.message){var o=JSON.parse(r.error);e.modalService.showAlertDanger(o.error,o.message)}else e.modalService.showAlertDanger("modal.titles.attention","modal.messages.wrong-data")})},500)}},{key:"showValidationModal",value:function(){}},{key:"findLoggedUserInfo",value:function(e,t){var r=this;this.subscription$=this.personService.findPersonBySSN(d.a.API+"/v1/public/persons/ssn",e.getSocialSecurityNumber()).subscribe(function(o){r.modalService.hideModal(t);var n=new h.a;Object.assign(n,o),e.setId(n.getId()),e.setType(n.getType()),e.setProfiles(n.getProfiles()),r.storageService.setLocalUser(e),r.router.navigate(["home"])},function(){r.modalService.hideModal(t),r.modalService.showAlertDanger("modal.titles.error","modal.messages.ssn-not-found")})}}]),i}(v.a),c.\u0275fac=function(e){return new(e||c)(g.Jb(y.d),g.Jb(w.a),g.Jb(b.c),g.Jb(f.c),g.Jb(S.a),g.Jb(N.a),g.Jb(O.a),g.Jb(f.a))},c.\u0275cmp=g.Db({type:c,selectors:[["app-login"]],features:[g.ub],decls:37,vars:29,consts:[[1,"container"],[1,"box-wrapper","w-75","mx-auto","my-md-5","my-3","shadow-lg"],[1,"card"],[1,"card-body"],[1,"text-center"],["novalidate","",1,"needs-validation",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-5"],[1,"form-group"],["type","text","id","ssnInput","minlength","11","maxlength","11","formControlName","socialSecurityNumber",1,"form-control",3,"placeholder","ngClass","mask","dropSpecialCharacters"],[3,"control","label"],["type","password","id","passwordInput","maxlength","20","formControlName","password",1,"form-control",3,"placeholder","ngClass"],[1,"col-md-2"],["type","button",1,"btn","btn-success","btn-block",3,"disabled","click"],["type","submit",1,"d-none"],["btnSubmit",""],[1,"card-footer"],[1,"col-md-6","col-4"],[3,"routerLink"],[1,"col-md-6","col-8"],[1,"float-right",3,"routerLink"]],template:function(e,t){if(1&e){var r=g.Pb();g.Ob(0,"article",0),g.Ob(1,"div",1),g.Ob(2,"div",2),g.Ob(3,"div",3),g.Ob(4,"header"),g.Ob(5,"h1",4),g.uc(6," S E M S Y S "),g.Nb(),g.Nb(),g.Kb(7,"hr"),g.Ob(8,"form",5),g.Vb("ngSubmit",function(){return t.onSubmit()}),g.Ob(9,"div",6),g.Ob(10,"div",7),g.Ob(11,"div",8),g.Kb(12,"input",9),g.Yb(13,"translate"),g.Kb(14,"app-error-message",10),g.Nb(),g.Nb(),g.Ob(15,"div",7),g.Ob(16,"div",8),g.Kb(17,"input",11),g.Yb(18,"translate"),g.Kb(19,"app-error-message",10),g.Nb(),g.Nb(),g.Ob(20,"div",12),g.Ob(21,"button",13),g.Vb("click",function(){return g.mc(r),g.kc(25).click()}),g.uc(22),g.Yb(23,"translate"),g.Nb(),g.Nb(),g.Nb(),g.Ob(24,"button",14,15),g.uc(26," Login "),g.Nb(),g.Nb(),g.Nb(),g.Ob(27,"div",16),g.Ob(28,"div",6),g.Ob(29,"div",17),g.Ob(30,"a",18),g.uc(31),g.Yb(32,"translate"),g.Nb(),g.Nb(),g.Ob(33,"div",19),g.Ob(34,"a",20),g.uc(35),g.Yb(36,"translate"),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb()}2&e&&(g.xb(8),g.cc("formGroup",t.form),g.xb(4),g.cc("placeholder",g.Zb(13,17,"global.social-security-number"))("ngClass",t.buildValidationClass("socialSecurityNumber"))("mask",t.inputMasks.socialSecurityNumber)("dropSpecialCharacters",!1),g.xb(2),g.cc("control",t.form.get("socialSecurityNumber"))("label","Social Security Number"),g.xb(3),g.cc("placeholder",g.Zb(18,19,"global.password"))("ngClass",t.buildValidationClass("password")),g.xb(2),g.cc("control",t.form.get("password"))("label","Password"),g.xb(2),g.cc("disabled",!t.form.valid),g.xb(1),g.wc(" ",g.Zb(23,21,"global.buttons.login")," "),g.xb(8),g.cc("routerLink",g.ec(27,P)),g.xb(1),g.wc(" ",g.Zb(32,23,"global.buttons.sign-up")," "),g.xb(3),g.cc("routerLink",g.ec(28,j)),g.xb(1),g.wc(" ",g.Zb(36,25,"global.forgot-password")," "))},directives:[b.v,b.p,b.h,b.a,k.a,b.l,b.k,b.o,b.f,l.j,x.a,f.e],pipes:[y.c],encapsulation:2}),c)}],L=((s=function e(){n(this,e)}).\u0275mod=g.Hb({type:s}),s.\u0275inj=g.Gb({factory:function(e){return new(e||s)},imports:[[f.f.forChild(C)],f.f]}),s),J=i("PCNd"),D=((u=function e(){n(this,e)}).\u0275mod=g.Hb({type:u}),u.\u0275inj=g.Gb({factory:function(e){return new(e||u)},imports:[[l.c,b.r,L,J.a]]}),u)}}])}();
//# sourceMappingURL=11-es5.20a42657570399da6d09.js.map