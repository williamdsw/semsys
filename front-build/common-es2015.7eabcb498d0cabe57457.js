(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"1QM4":function(t,e,s){"use strict";s.d(e,"a",function(){return h});var i=s("3Pt+"),r=s("tk/3"),n=s("XNiG"),a=s("0OAS"),o=s("fXoL"),u=s("sYmb"),c=s("n90K"),l=s("VQPA");let h=(()=>{class t extends a.a{constructor(t,e,s){super(t,e),this.translateService=t,this.storageService=e,this.modalService=s,this.globalHeader="header",this.error$=new n.a,this.queryField=new i.d,this.hasError=!1,this.recordsCount=0,this.params=new r.d,this.modalTexts={confirm:{title:"modal.titles.confirmation",body:"modal.messages.confirmation"},success:{title:"modal.titles.success",body:"modal.messages.delete-success"},error:{title:"modal.titles.error",body:"modal.messages.delete-error"},loading:{body:"global.messages.system-error"}},this.confirmTitle="modal.titles.confirmation",this.confirmBody="modal.messages.confirmation",this.successTitle="modal.titles.success",this.successMessage="modal.messages.delete-success",this.errorTitle="modal.titles.error",this.errorMessage="modal.messages.delete-error",this.loadingErrorTitle="modal.titles.error",this.loadingErrorMessage="global.messages.system-error"}ngOnInit(){}handleError(t,e){this.modalService.showAlertDanger(t,e)}}return t.\u0275fac=function(e){return new(e||t)(o.Jb(u.d),o.Jb(c.a),o.Jb(l.a))},t.\u0275cmp=o.Db({type:t,selectors:[["app-base-list"]],features:[o.ub],decls:1,vars:0,template:function(t,e){1&t&&o.Kb(0,"div")},encapsulation:2}),t})()},"1w29":function(t,e,s){"use strict";s.d(e,"a",function(){return c});var i=s("kpR/"),r=s("1QM4"),n=s("fXoL"),a=s("sYmb"),o=s("n90K"),u=s("VQPA");let c=(()=>{class t extends r.a{constructor(t,e,s){super(t,e,s),this.translateService=t,this.storageService=e,this.modalService=s,this._localUser=new i.a,this.tableHeaders=[]}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(a.d),n.Jb(o.a),n.Jb(u.a))},t.\u0275cmp=n.Db({type:t,selectors:[["app-base-table"]],features:[n.ub],decls:1,vars:0,template:function(t,e){1&t&&n.Kb(0,"div")},encapsulation:2}),t})()},"4hIP":function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){this.phoneNumbers=[]}getId(){return this.id}setId(t){this.id=t}getName(){return this.name}setName(t){this.name=t}getEmail(){return this.email}setEmail(t){this.email=t}getSocialSecurityNumber(){return this.socialSecurityNumber}setSocialSecurityNumber(t){this.socialSecurityNumber=t}getPassword(){return this.password}setPassword(t){this.password=t}getPhoneNumbers(){return this.phoneNumbers}setPhoneNumbers(t){this.phoneNumbers=t}getStreet(){return this.street}setStreet(t){this.street=t}getNumber(){return this.number}setNumber(t){this.number=t}getComplement(){return this.complement}setComplement(t){this.complement=t}getZipCode(){return this.zipCode}setZipCode(t){this.zipCode=t}getCityId(){return this.cityId}setCityId(t){this.cityId=t}}},Avbo:function(t,e,s){"use strict";s.d(e,"a",function(){return r});var i=s("fXoL");let r=(()=>{class t{constructor(){}buildFileName(t){return t&&""!==t?t=(t=(t=t.toLowerCase()).split(" ").join("-")).split("_").join("-"):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},Dplh:function(t,e,s){"use strict";s.d(e,"a",function(){return w});var i=s("3Pt+"),r=s("EY2u"),n=s("/uUt"),a=s("eIep"),o=s("lJxs"),u=s("AytR");class c{constructor(){}getId(){return this.id}setId(t){this.id=t}getName(){return this.name}setName(t){this.name=t}getAbbreviation(){return this.abbreviation}setAbbreviation(t){this.abbreviation=t}}class l{constructor(){}getId(){return this.id}setId(t){this.id=t}getName(){return this.name}setName(t){this.name=t}getAbbreviation(){return this.abbreviation}setAbbreviation(t){this.abbreviation=t}}class h{constructor(){}getId(){return this.id}setId(t){this.id=t}getName(){return this.name}setName(t){this.name=t}}var d=s("tk4k"),m=s("DC0s"),b=s("fXoL"),p=s("sYmb"),g=s("n90K"),f=s("tyNb"),v=s("VQPA"),S=s("bmVm"),y=s("Vd1Q"),I=s("dDXk"),C=s("iu4l"),N=s("xaOb");let w=(()=>{class t extends m.a{constructor(t,e,s,i,r,n,a,o,u,c){super(t,e,s,i),this.translateService=t,this.storageService=e,this.formBuilder=s,this.router=i,this.modalService=r,this.zipCodeService=n,this.countryService=a,this.stateService=o,this.cityService=u,this.personService=c,this.currentCountryId=0,this.currentStateAbbreviation="",this.currentCityName="",this.countries=[],this.states=[],this.cities=[],this.previousSocialSecurityNumber="",this.previousEmail="",this.socialSecurityNumberExists=!1,this.emailExists=!1,this.showModal=!0}ngOnInit(){this.countries$=this.loadCountries(),this.form=this.buildForm(),this.form.valueChanges.subscribe(t=>Object.assign(this.model,t)),this.form.get("countryId").valueChanges.subscribe(t=>{null!==t&&""!==t?this.loadStates(t):(this.states=[],this.cities=[])},()=>this.states=[]),this.form.get("stateId").valueChanges.subscribe(t=>{null!==this.currentCountryId&&0!==this.currentCountryId&&null!==t&&""!==t?this.loadCities(t):this.cities=[]},()=>this.cities=[]),this.form.get("zipCode").statusChanges.pipe(Object(n.a)(),Object(a.a)(t=>"VALID"===t?this.zipCodeService.searchZipCode(this.form.get("zipCode").value):r.a)).subscribe(t=>t?this.loadAddressData(t):{})}ngOnDestroy(){this.subscription$.unsubscribe()}showValidationModal(t){const e=[];Object.keys(t.controls).forEach(t=>e.push(t)),e.map((t,s)=>{t.endsWith("Id")&&(t=t.replace("Id","")),t=(t=t.split("").map(t=>t===t.toUpperCase()?" "+t:t).join("")).substring(0,1).toUpperCase()+t.substring(1,t.length),e[s]=t}),this.modalService.showValidations(e)}loadCountries(){return this.countryService.listCountries().pipe(Object(o.a)(t=>t.map(t=>{const e=new c;return Object.assign(e,t),this.countries.push(e),e})))}loadStates(t){this.currentCountryId=parseInt(t,10),this.subscription$=this.stateService.listStates(parseInt(t,10)).subscribe(t=>{this.states=t.map(t=>{const e=new l;return Object.assign(e,t),e}),setTimeout(()=>{if(""!==this.currentStateAbbreviation){const t=this.states.filter(t=>t.getAbbreviation()===this.currentStateAbbreviation)[0];null!=t?this.form.patchValue({stateId:t.getId()}):this.currentStateAbbreviation=""}},100)},()=>this.states=[])}loadCities(t){this.subscription$=this.cityService.listCities(this.currentCountryId,parseInt(t,10)).subscribe(t=>{this.cities=t.map(t=>{const e=new h;return Object.assign(e,t),e}),setTimeout(()=>{if(""!==this.currentCityName){const t=this.cities.filter(t=>t.getName().toLowerCase()===this.currentCityName.toLowerCase())[0];null!=t?this.form.patchValue({cityId:t.getId()}):this.currentCityName=""}},100)},()=>this.cities=[])}buildForm(){return this.formBuilder.group({id:[null],name:[null,[i.t.required,i.t.minLength(5),i.t.maxLength(120)]],email:[null,[i.t.required,i.t.email,i.t.maxLength(30)]],socialSecurityNumber:[null,[i.t.required,i.t.minLength(11),i.t.maxLength(11)]],password:[null,[i.t.required,i.t.minLength(10),i.t.maxLength(20)]],confirmPassword:[null,[i.t.required,d.a.equalsTo("password")]],phoneNumbers:this.formBuilder.group({phoneNumber0:[null,[i.t.required,i.t.minLength(12),i.t.maxLength(12)]],phoneNumber1:[null,[i.t.minLength(12),i.t.maxLength(12)]],phoneNumber2:[null,[i.t.minLength(12),i.t.maxLength(12)]]}),street:[null,[i.t.required,i.t.minLength(5),i.t.maxLength(120)]],number:[null,[i.t.required,i.t.minLength(1),i.t.maxLength(5)]],complement:[null],zipCode:[null,[i.t.required,i.t.minLength(5),i.t.maxLength(10),d.a.zipCode]],countryId:[null,[i.t.required]],stateId:[null,[i.t.required]],cityId:[null,[i.t.required]]})}loadAddressData(t){if("error"in t)this.modalService.showAlertDanger("modal.titles.attention","modal.messages.zipcode-not-found");else{const e=this.countries.filter(e=>e.getAbbreviation().includes(t.country))[0];null!=e&&(this.currentCountryId=e.getId(),this.currentStateAbbreviation=t.state,this.currentCityName=t.city,this.form.patchValue({countryId:e.getId()}))}}searchSocialSecurityNumber(t){this.form.get("socialSecurityNumber").valid&&this.previousSocialSecurityNumber!==t&&(this.subscription$=this.personService.findPersonBySSN(u.a.API+"/v1/public/persons/ssn",t).subscribe(t=>{null!=t&&(this.socialSecurityNumberExists=!0,this.modalService.showAlertDanger("modal.titles.error","modal.messages.ssn-found"))},e=>{console.log(e),this.socialSecurityNumberExists=!1,this.previousSocialSecurityNumber=t}))}searchEmail(t){this.form.get("email").valid&&this.previousEmail!==t&&(this.subscription$=this.personService.findPersonByEmail(u.a.API+"/v1/public/persons/email",t).subscribe(t=>{null!=t&&(this.emailExists=!0,this.modalService.showAlertDanger("modal.titles.error","modal.messages.email-found"))},e=>{console.log(e),this.emailExists=!1,this.previousEmail=t}))}onSocialSecurityNumberFocusOut(t){this.searchSocialSecurityNumber(t)}onEmailFocusOut(t){this.searchEmail(t)}}return t.\u0275fac=function(e){return new(e||t)(b.Jb(p.d),b.Jb(g.a),b.Jb(i.c),b.Jb(f.c),b.Jb(v.a),b.Jb(S.a),b.Jb(y.a),b.Jb(I.a),b.Jb(C.a),b.Jb(N.a))},t.\u0275cmp=b.Db({type:t,selectors:[["app-persons-form"]],features:[b.ub],decls:1,vars:0,template:function(t,e){1&t&&b.Kb(0,"div")},encapsulation:2}),t})()},Vd1Q:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("AytR"),r=s("8OjO"),n=s("fXoL"),a=s("tk/3");let o=(()=>{class t extends r.a{constructor(t){super(t),this.httpClient=t}listCountries(){return this.listAll(i.a.API+"/v1/public/countries")}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(a.b))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},XIlG:function(t,e,s){"use strict";s.d(e,"a",function(){return u});var i=s("1QM4"),r=s("fXoL"),n=s("sYmb"),a=s("n90K"),o=s("VQPA");let u=(()=>{class t extends i.a{constructor(t,e,s){super(t,e,s),this.translateService=t,this.storageService=e,this.modalService=s}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(n.d),r.Jb(a.a),r.Jb(o.a))},t.\u0275cmp=r.Db({type:t,selectors:[["app-base-card-list"]],features:[r.ub],decls:1,vars:0,template:function(t,e){1&t&&r.Kb(0,"div")},encapsulation:2}),t})()},bmVm:function(t,e,s){"use strict";s.d(e,"a",function(){return a});var i=s("LRne"),r=s("fXoL"),n=s("tk/3");let a=(()=>{class t{constructor(t){this.httpClient=t}searchZipCode(t){return""!==t&&/^[0-9]{5}(?:-[0-9]{4})?$/.test(t)?this.httpClient.get("//ziptasticapi.com/"+t):Object(i.a)({})}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(n.b))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},dDXk:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("AytR"),r=s("8OjO"),n=s("fXoL"),a=s("tk/3");let o=(()=>{class t extends r.a{constructor(t){super(t),this.httpClient=t}listStates(t){return this.listAll(`${i.a.API}/v1/public/countries/${t}/states`)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(a.b))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},iu4l:function(t,e,s){"use strict";s.d(e,"a",function(){return o});var i=s("AytR"),r=s("8OjO"),n=s("fXoL"),a=s("tk/3");let o=(()=>{class t extends r.a{constructor(t){super(t),this.httpClient=t}listCities(t,e){return this.listAll(`${i.a.API}/v1/public/countries/${t}/states/${e}/cities`)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(a.b))},t.\u0275prov=n.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},vakP:function(t,e,s){"use strict";s.d(e,"a",function(){return i});class i{constructor(){}getId(){return this.id}setId(t){this.id=t}getDatetime(){return this.datetime}setDatetime(t){this.datetime=t}getEmployee(){return this.employee}setEmployee(t){this.employee=t}getStudent(){return this.student}setStudent(t){this.student=t}getMeetingStatus(){return this.meetingStatus}setMeetingStatus(t){this.meetingStatus=t}}}}]);
//# sourceMappingURL=common-es2015.7eabcb498d0cabe57457.js.map