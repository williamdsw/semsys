(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{qUkX:function(t,e,n){"use strict";n.r(e),n.d(e,"ReportsModule",function(){return P});var s=n("ofXK"),o=n("3Pt+"),r=n("tyNb"),c=n("EY2u"),i=n("lJxs"),a=n("JIr8"),b=n("VCD0"),l=n("5soc"),d=n("YNhY"),p=n("vakP"),u=n("1w29"),g=n("fXoL"),f=n("sYmb"),h=n("n90K"),m=n("VQPA"),O=n("Oi0n"),w=n("ej43");function N(t,e){if(1&t&&(g.Ob(0,"th",13),g.uc(1),g.Yb(2,"translate"),g.Nb()),2&t){const t=e.$implicit;g.xb(1),g.wc(" ",g.Zb(2,1,t)," ")}}function y(t,e){if(1&t){const t=g.Pb();g.Ob(0,"tr"),g.Ob(1,"td",14),g.uc(2),g.Nb(),g.Ob(3,"td",14),g.uc(4),g.Yb(5,"date"),g.Nb(),g.Ob(6,"td",14),g.uc(7),g.Nb(),g.Ob(8,"td",14),g.uc(9),g.Nb(),g.Ob(10,"td",14),g.Ob(11,"button",15),g.Vb("click",function(){g.mc(t);const n=e.$implicit;return g.Xb(3).showDetailModal(n)}),g.uc(12),g.Yb(13,"translate"),g.Nb(),g.Nb(),g.Nb()}if(2&t){const t=e.$implicit,n=e.index;g.xb(2),g.wc(" ",n+1," "),g.xb(2),g.wc(" ",g.Zb(5,5,t.getEmission())," "),g.xb(3),g.wc(" ",t.getSchedule().getEmployee().getName(),""),g.xb(2),g.wc(" ",t.getSchedule().getStudent().getName(),""),g.xb(3),g.wc(" ",g.Zb(13,7,"report.details")," ... ")}}function x(t,e){if(1&t&&(g.Ob(0,"div",9),g.Ob(1,"table",10),g.Ob(2,"thead"),g.Ob(3,"tr"),g.sc(4,N,3,3,"th",11),g.Nb(),g.Nb(),g.Ob(5,"tbody"),g.sc(6,y,14,9,"tr",12),g.Nb(),g.Nb(),g.Nb()),2&t){const t=g.Xb().ngIf,e=g.Xb();g.xb(4),g.cc("ngForOf",e.tableHeaders),g.xb(2),g.cc("ngForOf",t)}}function E(t,e){if(1&t&&(g.Ob(0,"div",6),g.Ob(1,"div",7),g.sc(2,x,7,2,"div",8),g.Nb(),g.Nb()),2&t){const t=e.ngIf,n=g.Xb(),s=g.kc(13);g.xb(2),g.cc("ngIf",!n.hasError&&0!==t.length)("ngIfElse",s)}}function v(t,e){1&t&&(g.Ob(0,"span"),g.uc(1),g.Yb(2,"translate"),g.Yb(3,"translate"),g.Nb()),2&t&&(g.xb(1),g.xc(" ",g.Zb(2,2,"global.messages.loading")," ",g.Zb(3,4,"global.menu-links.my-reports")," ... "))}function S(t,e){if(1&t&&(g.Ob(0,"div",16),g.sc(1,v,4,6,"span",17),g.Nb()),2&t){const t=g.Xb(),e=g.kc(11);g.xb(1),g.cc("ngIf",!t.hasError)("ngIfElse",e)}}function I(t,e){if(1&t){const t=g.Pb();g.Ob(0,"span"),g.uc(1),g.Yb(2,"translate"),g.Nb(),g.Ob(3,"button",18),g.Vb("click",function(){return g.mc(t),g.Xb().onReload()}),g.uc(4),g.Yb(5,"translate"),g.Nb()}2&t&&(g.xb(1),g.wc(" ",g.Zb(2,2,"global.messages.system-error")," "),g.xb(3),g.wc(" ",g.Zb(5,4,"global.buttons.reload")," "))}function Y(t,e){if(1&t&&(g.Ob(0,"div",16),g.Ob(1,"span"),g.uc(2),g.Yb(3,"translate"),g.Nb(),g.Nb()),2&t){const t=g.Xb();g.xb(2),g.wc(" ",g.Zb(3,1,t.containsProfile("EMPLOYEE")?"report.employee-reports-not-found":"report.student-reports-not-found")," ")}}const k=[{path:"",component:(()=>{class t extends u.a{constructor(t,e,n,s,o){super(t,e,n),this.translateService=t,this.storageService=e,this.modalService=n,this.reportService=s,this.authenticationService=o,this.globalHeader="global.menu-links.my-reports",this.tableHeaders=["#","report.emission","report.written-by","report.about","report.information"],Object.assign(this._localUser,e.getLocalUser())}ngOnInit(){this.records$=this.loadData()}onUpdate(){}onDelete(){}onReload(){this.hasError=!1,this.records$=this.loadData()}loadData(){return"Employee"===this._localUser.getType()?this.pipeFindAll(this.reportService.findAllByEmployee(this._localUser.getId())):"Student"===this._localUser.getType()?this.pipeFindAll(this.reportService.findAllByStudent(this._localUser.getId())):void 0}pipeFindAll(t){return t.pipe(Object(i.a)(t=>t.map(t=>{this.hasError=!1;let e=new b.a,n=new p.a,s=new l.a,o=new d.a;return e=Object.assign(e,t),n=Object.assign(n,e.getSchedule()),s=Object.assign(s,n.getEmployee()),o=Object.assign(o,n.getStudent()),n.setEmployee(s),n.setStudent(o),e.setSchedule(n),e})),Object(a.a)(()=>(this.hasError=!0,this.error$.next(!0),this.handleError(this.modalTexts.error.title,this.modalTexts.loading.body),c.a)))}showDetailModal(t){const e=t.getSchedule().getEmployee().getName(),n=t.getSchedule().getStudent().getName();this.modalService.showReportDetails(e,n,t.getTitle(),t.getContent(),t.getEmission())}containsProfile(t){return this.authenticationService.containsProfile(t)}}return t.\u0275fac=function(e){return new(e||t)(g.Jb(f.d),g.Jb(h.a),g.Jb(m.a),g.Jb(O.a),g.Jb(w.a))},t.\u0275cmp=g.Db({type:t,selectors:[["app-reports-list"]],features:[g.ub],decls:14,vars:7,consts:[[1,"table-box","w-100","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],["class","row",4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["nothingFound",""],[1,"row"],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],["scope","row"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(t,e){if(1&t&&(g.Ob(0,"article",0),g.Ob(1,"header"),g.Ob(2,"h1",1),g.uc(3),g.Yb(4,"translate"),g.Nb(),g.Nb(),g.Kb(5,"hr"),g.sc(6,E,3,2,"div",2),g.Yb(7,"async"),g.sc(8,S,2,2,"ng-template",null,3,g.tc),g.sc(10,I,6,6,"ng-template",null,4,g.tc),g.sc(12,Y,4,3,"ng-template",null,5,g.tc),g.Nb()),2&t){const t=g.kc(9);g.xb(3),g.wc(" ",g.Zb(4,3,e.globalHeader)," "),g.xb(3),g.cc("ngIf",g.Zb(7,5,e.records$))("ngIfElse",t)}},directives:[s.l,s.k],pipes:[f.c,s.b,s.e],encapsulation:2}),t})()},{path:"new",component:n("jaB+").a}];let j=(()=>{class t{}return t.\u0275mod=g.Hb({type:t}),t.\u0275inj=g.Gb({factory:function(e){return new(e||t)},imports:[[r.f.forChild(k)],r.f]}),t})();var Z=n("tZSt"),F=n("PCNd");let P=(()=>{class t{}return t.\u0275mod=g.Hb({type:t}),t.\u0275inj=g.Gb({factory:function(e){return new(e||t)},imports:[[s.c,o.r,j,Z.a,F.a]]}),t})()}}]);
//# sourceMappingURL=15-es2015.d9355168d88e2ace88ac.js.map