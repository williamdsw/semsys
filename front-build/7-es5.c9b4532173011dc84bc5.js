!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var s=c(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Qz0R:function(o,c,s){"use strict";s.r(c),s.d(c,"CoursesModule",function(){return R});var i=s("ofXK"),a=s("3Pt+"),l=s("tyNb"),b=s("EY2u"),u=s("IzEk"),d=s("eIep"),f=s("lJxs"),p=s("JIr8"),m=s("VLk4"),g=s("1w29"),v=s("fXoL"),h=s("sYmb"),y=s("VQPA"),w=s("n90K"),O=s("VEcs"),x=s("ej43");function N(e,t){if(1&e&&(v.Ob(0,"option",25),v.uc(1),v.Yb(2,"translate"),v.Nb()),2&e){var r=t.$implicit,n=t.index,o=v.Xb();v.cc("value",r),v.xb(1),v.wc(" ",v.Zb(2,2,o.periodDescriptions[n])," ")}}function S(e,t){if(1&e&&(v.Ob(0,"th",34),v.uc(1),v.Yb(2,"translate"),v.Nb()),2&e){var r=t.$implicit;v.xb(1),v.wc(" ",v.Zb(2,1,r)," ")}}function k(e,t){if(1&e){var r=v.Pb();v.Ob(0,"div"),v.Ob(1,"input",39),v.Vb("click",function(){v.mc(r);var e=v.Xb().$implicit;return v.Xb(3).toggleButtons(e)}),v.Nb(),v.Nb()}}function I(e,t){if(1&e){var r=v.Pb();v.Ob(0,"td",35),v.Ob(1,"button",40),v.Vb("click",function(){v.mc(r);var e=v.Xb().$implicit;return v.Xb(3).showNewSchoolClass(e)}),v.uc(2),v.Yb(3,"translate"),v.Nb(),v.Nb()}2&e&&(v.xb(2),v.wc(" ",v.Zb(3,1,"course.classes.new")," "))}function P(e,t){if(1&e){var r=v.Pb();v.Ob(0,"tr"),v.Ob(1,"td",35),v.sc(2,k,2,0,"div",36),v.Nb(),v.Ob(3,"td",35),v.uc(4),v.Nb(),v.Ob(5,"td",35),v.uc(6),v.Yb(7,"translate"),v.Nb(),v.Ob(8,"td",35),v.uc(9),v.Yb(10,"translate"),v.Nb(),v.Ob(11,"td",35),v.Ob(12,"button",37),v.Vb("click",function(){v.mc(r);var e=t.$implicit;return v.Xb(3).showSchoolClasses(e)}),v.uc(13),v.Yb(14,"translate"),v.Nb(),v.Nb(),v.sc(15,I,4,3,"td",38),v.Nb()}if(2&e){var n=t.$implicit,o=v.Xb(3);v.xb(2),v.cc("ngIf",o.containsProfile("ADMIN")),v.xb(2),v.wc(" ",n.getName()," "),v.xb(2),v.wc(" ",v.Zb(7,6,o.getTranslatedPeriod(n.getPeriod()))," "),v.xb(3),v.wc(" ",v.Zb(10,8,o.getTranslatedCourseType(n.getType()))," "),v.xb(4),v.wc(" ",v.Zb(14,10,"course.classes.list")," "),v.xb(2),v.cc("ngIf",o.containsProfile("ADMIN"))}}function T(e,t){if(1&e&&(v.Ob(0,"div",29),v.Ob(1,"table",30),v.Ob(2,"thead"),v.Ob(3,"tr"),v.sc(4,S,3,3,"th",31),v.Ob(5,"th",32),v.uc(6),v.Yb(7,"translate"),v.Nb(),v.Nb(),v.Nb(),v.Ob(8,"tbody"),v.sc(9,P,16,12,"tr",33),v.Nb(),v.Nb(),v.Nb()),2&e){var r=v.Xb().ngIf,n=v.Xb();v.xb(4),v.cc("ngForOf",n.tableHeaders),v.xb(1),v.cc("colSpan",n.containsProfile("ADMIN")?2:1),v.xb(1),v.wc(" ",v.Zb(7,4,"course.classes.classes")," "),v.xb(3),v.cc("ngForOf",r)}}function Y(e,t){if(1&e&&(v.Ob(0,"div",26),v.Ob(1,"div",27),v.sc(2,T,10,6,"div",28),v.Nb(),v.Nb()),2&e){var r=t.ngIf,n=v.Xb(),o=v.kc(46);v.xb(2),v.cc("ngIf",!n.hasError&&0!==r.length)("ngIfElse",o)}}function D(e,t){if(1&e){var r=v.Pb();v.Ob(0,"div",41),v.Ob(1,"div",42),v.Ob(2,"button",43),v.Vb("click",function(){return v.mc(r),v.Xb().onDelete()}),v.uc(3),v.Yb(4,"translate"),v.Nb(),v.Nb(),v.Ob(5,"div",44),v.Ob(6,"button",45),v.Vb("click",function(){return v.mc(r),v.Xb().showNewCourseModal()}),v.uc(7),v.Yb(8,"translate"),v.Nb(),v.Nb(),v.Nb()}if(2&e){var n=v.Xb();v.xb(2),v.cc("disabled",!n.isSelected),v.xb(1),v.wc(" ",v.Zb(4,3,"global.buttons.delete")," "),v.xb(4),v.wc(" ",v.Zb(8,5,"global.buttons.new-course")," ")}}function A(e,t){1&e&&(v.Ob(0,"span"),v.uc(1),v.Yb(2,"translate"),v.Yb(3,"translate"),v.Nb()),2&e&&(v.xb(1),v.xc(" ",v.Zb(2,2,"global.messages.loading")," ",v.Zb(3,4,"global.menu-links.courses")," ... "))}function C(e,t){if(1&e&&(v.Ob(0,"div",46),v.sc(1,A,4,6,"span",47),v.Nb()),2&e){var r=v.Xb(),n=v.kc(44);v.xb(1),v.cc("ngIf",!r.hasError)("ngIfElse",n)}}function F(e,t){if(1&e){var r=v.Pb();v.Ob(0,"span"),v.uc(1),v.Yb(2,"translate"),v.Nb(),v.Ob(3,"button",48),v.Vb("click",function(){return v.mc(r),v.Xb().onReload()}),v.uc(4),v.Yb(5,"translate"),v.Nb()}2&e&&(v.xb(1),v.wc(" ",v.Zb(2,2,"global.messages.system-error")," "),v.xb(3),v.wc(" ",v.Zb(5,4,"global.buttons.reload")," "))}function Z(e,t){1&e&&(v.Ob(0,"div",46),v.Ob(1,"span"),v.uc(2),v.Yb(3,"translate"),v.Nb(),v.Nb()),2&e&&(v.xb(2),v.wc(" ",v.Zb(3,1,"global.messages.nothing-found")," "))}var E,X,j,V=[{path:"",component:(E=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(l,o);var c,s,i,a=n(l);function l(t,r,n,o,c){var s;return e(this,l),(s=a.call(this,t,n,r)).translateService=t,s.modalService=r,s.storageService=n,s.courseService=o,s.authenticationService=c,s.currentFilter="all",s.timePeriods=[],s.periodDescriptions=[],s.isSelected=!1,s.globalHeader="global.menu-links.courses",s.confirmBody="course.messages.confirmation",s.tableHeaders=["","global.personal.name","course.period.period","course.type.type"],s.timePeriods=s.courseService.listTimePeriods(),s.periodDescriptions=s.courseService.getPeriodDescriptions(),s}return c=l,(s=[{key:"ngOnInit",value:function(){this.onReload()}},{key:"onUpdate",value:function(){}},{key:"onReload",value:function(){this.hasError=!1,this.records$=this.loadData("ALL")}},{key:"onDelete",value:function(){var e=this,t=this.modalService.showConfirm(this.modalTexts.confirm.title,this.modalTexts.confirm.body);t.asObservable().pipe(Object(u.a)(1),Object(d.a)(function(t){return t?e.courseService.deleteCourse(e.selectedModel.getId()):b.a})).subscribe(function(){e.isSelected=!1,e.records$=e.loadData("ALL"),e.modalService.showAlertSuccess(e.modalTexts.success.title,e.modalTexts.success.body)},function(){return e.modalService.showAlertDanger(e.modalTexts.error.title,e.modalTexts.error.body)},function(){return t.unsubscribe()})}},{key:"loadData",value:function(e,t){switch(e){case"period":return this.pipeFindAll(this.courseService.findByKeyAndValueWhereUrlIs("value",t,this.courseService.protectedUrl+"/period"));case"name":return this.pipeFindAll(this.courseService.findByKeyAndValueWhereUrlIs("name",t,this.courseService.protectedUrl+"/name"));case"all":default:return this.pipeFindAll(this.courseService.findAll())}}},{key:"pipeFindAll",value:function(e){var t=this;return e.pipe(Object(f.a)(function(e){return e.map(function(e){t.hasError=!1;var r=new m.a;return r=Object.assign(r,e)})}),Object(p.a)(function(){return t.hasError=!0,t.error$.next(!0),t.handleError(t.modalTexts.error.title,t.modalTexts.loading.body),b.a}))}},{key:"toggleButtons",value:function(e){this.selectedModel=e,this.isSelected=!0}},{key:"toggleFilter",value:function(e,t){this.currentFilter=e,this.records$=this.loadData(e,t="period"===e&&""===t?"Morning":t)}},{key:"showSchoolClasses",value:function(e){this.modalService.showSchoolClass(e)}},{key:"showNewCourseModal",value:function(){var e=this,t=this.modalService.showNewCourse();t.asObservable().pipe(Object(u.a)(1)).subscribe(function(t){t?(e.modalService.showAlertSuccess(e.modalTexts.success.title,"course.messages.course-success"),e.records$=e.loadData()):e.modalService.showAlertDanger(e.modalTexts.error.title,"course.messages.course-error")},function(){return e.modalService.showAlertDanger(e.modalTexts.error.title,"course.messages.course-error")},function(){return t.unsubscribe()})}},{key:"showNewSchoolClass",value:function(e){var t=this,r=this.modalService.showNewSchoolClass(e);r.asObservable().subscribe(function(e){e?t.modalService.showAlertSuccess(t.modalTexts.success.title,"classes.messages.class-success"):t.modalService.showAlertDanger(t.modalTexts.error.title,"classes.messages.class-error")},function(){return t.modalService.showAlertDanger(t.modalTexts.error.title,"classes.messages.class-error")},function(){return r.unsubscribe()})}},{key:"getTranslatedPeriod",value:function(e){return this.courseService.getTranslatedPeriod(e)}},{key:"getTranslatedCourseType",value:function(e){return this.courseService.getTranslatedCourseType(e)}},{key:"containsProfile",value:function(e){return this.authenticationService.containsProfile(e)}}])&&t(c.prototype,s),i&&t(c,i),l}(g.a),E.\u0275fac=function(e){return new(e||E)(v.Jb(h.d),v.Jb(y.a),v.Jb(w.a),v.Jb(O.a),v.Jb(x.a))},E.\u0275cmp=v.Db({type:E,selectors:[["app-courses-list"]],features:[v.ub],decls:47,vars:29,consts:[[1,"table-box","w-100","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[1,"form-row","mb-3"],[1,"col-lg-3","col-md-4","my-2","my-md-0"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"form-control",3,"change"],["filterCombo",""],["value","all","selected",""],["value","period"],["value","name"],[1,"col-lg-2","col-md-3","my-2","my-md-0",3,"hidden"],["periodCombo",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-lg-9","col-md-8","my-2","my-md-0",3,"hidden"],["type","text",1,"form-control",3,"placeholder"],["nameInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"click"],["class","row",4,"ngIf","ngIfElse"],["class","row mt-2",4,"ngIf"],["spanLoading",""],["spanError",""],["nothingFound",""],[3,"value"],[1,"row"],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col",4,"ngFor","ngForOf"],[1,"text-center",3,"colSpan"],[4,"ngFor","ngForOf"],["scope","col"],["scope","row"],[4,"ngIf"],["type","button",1,"btn","btn-outline-info",3,"click"],["scope","row",4,"ngIf"],["type","radio","name","id",1,"custom-radio",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"row","mt-2"],[1,"col-lg-2","col-sm-3","my-md-0","my-2"],["type","button",1,"btn","btn-danger","w-100",3,"disabled","click"],[1,"col-lg-2","col-md-3","col-sm-4","my-md-0","my-2"],["type","button",1,"btn","btn-primary","w-100",3,"click"],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(e,t){if(1&e){var r=v.Pb();v.Ob(0,"article",0),v.Ob(1,"header"),v.Ob(2,"h1",1),v.uc(3),v.Yb(4,"translate"),v.Nb(),v.Nb(),v.Kb(5,"hr"),v.Ob(6,"div",2),v.Ob(7,"div",3),v.Ob(8,"div",4),v.Ob(9,"div",5),v.Ob(10,"span",6),v.uc(11),v.Yb(12,"translate"),v.Nb(),v.Nb(),v.Ob(13,"select",7,8),v.Vb("change",function(){v.mc(r);var e=v.kc(14);return t.toggleFilter(e.value,"")}),v.Ob(15,"option",9),v.uc(16),v.Yb(17,"translate"),v.Nb(),v.Ob(18,"option",10),v.uc(19),v.Yb(20,"translate"),v.Nb(),v.Ob(21,"option",11),v.uc(22),v.Yb(23,"translate"),v.Nb(),v.Nb(),v.Nb(),v.Nb(),v.Ob(24,"div",12),v.Ob(25,"select",7,13),v.Vb("change",function(){v.mc(r);var e=v.kc(26);return t.toggleFilter("period",e.value)}),v.sc(27,N,3,4,"option",14),v.Nb(),v.Nb(),v.Ob(28,"div",15),v.Ob(29,"div",4),v.Kb(30,"input",16,17),v.Yb(32,"translate"),v.Ob(33,"div",18),v.Ob(34,"button",19),v.Vb("click",function(){v.mc(r);var e=v.kc(31);return t.toggleFilter("name",e.value)}),v.uc(35),v.Yb(36,"translate"),v.Nb(),v.Nb(),v.Nb(),v.Nb(),v.Nb(),v.sc(37,Y,3,2,"div",20),v.Yb(38,"async"),v.Kb(39,"hr"),v.sc(40,D,9,7,"div",21),v.sc(41,C,2,2,"ng-template",null,22,v.tc),v.sc(43,F,6,6,"ng-template",null,23,v.tc),v.sc(45,Z,4,3,"ng-template",null,24,v.tc),v.Nb()}if(2&e){var n=v.kc(42);v.xb(3),v.wc(" ",v.Zb(4,13,t.globalHeader)," "),v.xb(8),v.wc(" ",v.Zb(12,15,"course.filter")," "),v.xb(5),v.wc(" ",v.Zb(17,17,"global.other.all")," "),v.xb(3),v.wc(" ",v.Zb(20,19,"course.period.period")," "),v.xb(3),v.wc(" ",v.Zb(23,21,"global.personal.name")," "),v.xb(2),v.cc("hidden","period"!==t.currentFilter),v.xb(3),v.cc("ngForOf",t.timePeriods),v.xb(1),v.cc("hidden","name"!==t.currentFilter),v.xb(2),v.cc("placeholder",v.Zb(32,23,"global.personal.name")),v.xb(5),v.wc(" ",v.Zb(36,25,"global.buttons.search")," "),v.xb(2),v.cc("ngIf",v.Zb(38,27,t.records$))("ngIfElse",n),v.xb(3),v.cc("ngIf",t.containsProfile("ADMIN"))}},directives:[a.q,a.u,i.k,i.l],pipes:[h.c,i.b],styles:[".table-box[_ngcontent-%COMP%] { width: 120rem; }",".container[_ngcontent-%COMP%] { max-width: 1200px; }"]}),E)}],M=((X=function t(){e(this,t)}).\u0275mod=v.Hb({type:X}),X.\u0275inj=v.Gb({factory:function(e){return new(e||X)},imports:[[l.f.forChild(V)],l.f]}),X),$=s("PCNd"),R=((j=function t(){e(this,t)}).\u0275mod=v.Hb({type:j}),j.\u0275inj=v.Gb({factory:function(e){return new(e||j)},imports:[[i.c,a.r,M,$.a]]}),j)}}])}();
//# sourceMappingURL=7-es5.c9b4532173011dc84bc5.js.map