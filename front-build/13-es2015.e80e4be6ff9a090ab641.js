(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"18Gw":function(t,e,s){"use strict";s.r(e),s.d(e,"PersonsModule",function(){return A});var r=s("ofXK"),n=s("tyNb"),c=s("EY2u"),a=s("IzEk"),o=s("eIep"),i=s("lJxs"),b=s("JIr8"),l=s("AytR"),d=s("AqF/"),m=s("XIlG"),u=s("fXoL"),g=s("sYmb"),h=s("n90K"),p=s("xaOb"),f=s("Avbo"),x=s("VQPA");function v(t,e){if(1&t){const t=u.Pb();u.Ob(0,"div",9),u.Ob(1,"div",10),u.Ob(2,"div",11),u.uc(3),u.Nb(),u.Kb(4,"img",12),u.Ob(5,"div",13),u.Ob(6,"p",14),u.uc(7),u.Nb(),u.Nb(),u.Ob(8,"div",15),u.Ob(9,"button",16),u.Vb("click",function(){u.mc(t);const s=e.$implicit;return u.Xb(3).onDelete(s)}),u.uc(10),u.Yb(11,"translate"),u.Nb(),u.Nb(),u.Nb(),u.Nb()}if(2&t){const t=e.$implicit;u.xb(2),u.cc("title",t.getName()),u.xb(1),u.wc(" ",t.getName()," "),u.xb(1),u.cc("src",(null==t?null:t.getImageUrl())||"assets/images/avatar-blank.png",u.oc),u.xb(3),u.wc(" ",t.getEmail()," "),u.xb(3),u.wc(" ",u.Zb(11,5,"global.buttons.delete")," ")}}function O(t,e){if(1&t&&(u.Ob(0,"div",6),u.Ob(1,"div",7),u.sc(2,v,12,7,"div",8),u.Nb(),u.Nb()),2&t){const t=u.Xb().ngIf;u.xb(2),u.cc("ngForOf",t)}}function w(t,e){if(1&t&&(u.Ob(0,"div"),u.sc(1,O,3,1,"div",5),u.Nb()),2&t){const t=u.Xb();u.xb(1),u.cc("ngIf",!t.hasError)}}function N(t,e){1&t&&(u.Ob(0,"span"),u.uc(1),u.Yb(2,"translate"),u.Yb(3,"translate"),u.Nb()),2&t&&(u.xb(1),u.xc(" ",u.Zb(2,2,"global.messages.loading")," ",u.Zb(3,4,"global.menu-links.persons")," ... ["))}function I(t,e){if(1&t&&(u.Ob(0,"div",17),u.sc(1,N,4,6,"span",2),u.Nb()),2&t){const t=u.Xb(),e=u.kc(11);u.xb(1),u.cc("ngIf",!t.hasError)("ngIfElse",e)}}function y(t,e){if(1&t){const t=u.Pb();u.Ob(0,"span"),u.uc(1),u.Yb(2,"translate"),u.Nb(),u.Ob(3,"button",18),u.Vb("click",function(){return u.mc(t),u.Xb().onSearch()}),u.uc(4),u.Yb(5,"translate"),u.Nb()}2&t&&(u.xb(1),u.wc(" ",u.Zb(2,2,"global.messages.system-error")," "),u.xb(3),u.wc(" ",u.Zb(5,4,"global.buttons.reload")," "))}const E=[{path:"",component:(()=>{class t extends m.a{constructor(t,e,s,r,n){super(t,e,n),this.translateService=t,this.storageService=e,this.personService=s,this.imageUtilService=r,this.modalService=n,this.globalHeader="global.menu-links.persons"}ngOnInit(){this.loadData()}onUpdate(){}onSearch(){this.hasError=!1,this.loadData()}onDelete(t){this.selectedModel=t,this.modalService.showConfirm(this.modalTexts.confirm.title,this.modalTexts.confirm.body).asObservable().pipe(Object(a.a)(1),Object(o.a)(e=>e?this.personService.deletePerson(t.getId()):c.a)).subscribe(()=>{this.loadData(),this.modalService.showAlertSuccess(this.modalTexts.success.title,this.modalTexts.success.body)},()=>this.modalService.showAlertDanger(this.modalTexts.error.title,this.modalTexts.error.body))}loadData(){this.records$=this.personService.findAllPersons().pipe(Object(i.a)(t=>t.map(t=>{const e=new d.a;Object.assign(e,t),this.hasError=!1;let s=l.a.BUCKET_BASE_URL;s+=this.imageUtilService.buildFileName(e.getName())+".jpg",e.setImageUrl(s);const r=document.createElement("img");return r.src=s,r.addEventListener("error",()=>e.setImageUrl(l.a.DEFAULT_AVATAR_IMG)),e})),Object(b.a)(()=>(this.error$.next(!0),this.hasError=!0,this.handleError(this.modalTexts.error.title,this.modalTexts.loading.body),c.a)))}}return t.\u0275fac=function(e){return new(e||t)(u.Jb(g.d),u.Jb(h.a),u.Jb(p.a),u.Jb(f.a),u.Jb(x.a))},t.\u0275cmp=u.Db({type:t,selectors:[["app-persons"]],features:[u.ub],decls:12,vars:7,consts:[[1,"card-box","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["class","card-container",4,"ngIf"],[1,"card-container"],[1,"row","row-cols-1","row-cols-md-4"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"col","mb-4"],[1,"card","card-list-item"],[1,"card-header","card-name",3,"title"],["alt","person",1,"img-fluid","border-bottom",3,"src"],[1,"card-body"],[1,"card-text"],[1,"card-footer","p-0"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"bg-light","p-3","text-center"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(t,e){if(1&t&&(u.Ob(0,"article",0),u.Ob(1,"header"),u.Ob(2,"h1",1),u.uc(3),u.Yb(4,"translate"),u.Nb(),u.Nb(),u.Kb(5,"hr"),u.sc(6,w,2,1,"div",2),u.Yb(7,"async"),u.sc(8,I,2,2,"ng-template",null,3,u.tc),u.sc(10,y,6,6,"ng-template",null,4,u.tc),u.Nb()),2&t){const t=u.kc(9);u.xb(3),u.wc(" ",u.Zb(4,3,e.globalHeader)," "),u.xb(3),u.cc("ngIf",u.Zb(7,5,e.records$))("ngIfElse",t)}},directives:[r.l,r.k],pipes:[g.c,r.b],encapsulation:2}),t})()}];let S=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[n.f.forChild(E)],n.f]}),t})();var k=s("PCNd");let A=(()=>{class t{}return t.\u0275mod=u.Hb({type:t}),t.\u0275inj=u.Gb({factory:function(e){return new(e||t)},imports:[[r.c,S,k.a]]}),t})()}}]);
//# sourceMappingURL=13-es2015.e80e4be6ff9a090ab641.js.map