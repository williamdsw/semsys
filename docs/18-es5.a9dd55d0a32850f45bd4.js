!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=o(t);if(e){var c=o(this).constructor;n=Reflect.construct(r,arguments,c)}else n=r.apply(this,arguments);return a(this,n)}}function a(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{pQie:function(a,o,c){"use strict";c.r(o),c.d(o,"StudentsModule",function(){return R});var i=c("ofXK"),s=c("3Pt+"),b=c("tyNb"),l=c("EY2u"),u=c("lJxs"),f=c("JIr8"),d=c("AytR"),p=c("YNhY"),m=c("XIlG"),g=c("fXoL"),h=c("sYmb"),v=c("n90K"),y=c("Ghzu"),O=c("Avbo"),w=c("VQPA");function N(t,e){if(1&t&&(g.Ob(0,"div",16),g.Ob(1,"div",17),g.Ob(2,"div",18),g.uc(3),g.Nb(),g.Kb(4,"img",19),g.Ob(5,"div",20),g.Ob(6,"p",21),g.uc(7),g.Nb(),g.Nb(),g.Nb(),g.Nb()),2&t){var n=e.$implicit;g.xb(2),g.cc("title",n.getName()),g.xb(1),g.wc(" ",n.getName()," "),g.xb(1),g.cc("src",(null==n?null:n.getImageUrl())||"assets/images/avatar-blank.png",g.oc),g.xb(3),g.wc(" ",n.getEmail()," ")}}function x(t,e){if(1&t&&(g.Ob(0,"div",13),g.Ob(1,"div",14),g.sc(2,N,8,4,"div",15),g.Nb(),g.Nb()),2&t){var n=g.Xb().ngIf;g.xb(2),g.cc("ngForOf",n)}}function E(t,e){1&t&&(g.Ob(0,"div",22),g.uc(1),g.Yb(2,"translate"),g.Nb()),2&t&&(g.xb(1),g.wc(" ",g.Zb(2,1,"global.messages.nothing-found")," "))}function I(t,e){if(1&t&&(g.Ob(0,"div",2),g.Ob(1,"div",3),g.sc(2,x,3,1,"div",11),g.sc(3,E,3,3,"ng-template",null,12,g.tc),g.Nb(),g.Nb()),2&t){var n=g.kc(4),r=g.Xb();g.xb(2),g.cc("ngIf",!r.hasError&&0!==r.recordsCount)("ngIfElse",n)}}function k(t,e){1&t&&(g.Ob(0,"span"),g.uc(1),g.Yb(2,"translate"),g.Yb(3,"translate"),g.Nb()),2&t&&(g.xb(1),g.xc(" ",g.Zb(2,2,"global.messages.loading")," ",g.Zb(3,4,"global.menu-links.students")," ... "))}function S(t,e){if(1&t&&(g.Ob(0,"div",22),g.sc(1,k,4,6,"span",23),g.Nb()),2&t){var n=g.Xb(),r=g.kc(21);g.xb(1),g.cc("ngIf",!n.hasError)("ngIfElse",r)}}function j(t,e){if(1&t){var n=g.Pb();g.Ob(0,"span"),g.uc(1),g.Yb(2,"translate"),g.Nb(),g.Ob(3,"button",24),g.Vb("click",function(){return g.mc(n),g.Xb().onSearch()}),g.uc(4),g.Yb(5,"translate"),g.Nb()}2&t&&(g.xb(1),g.wc(" ",g.Zb(2,2,"global.messages.system-error")," "),g.xb(3),g.wc(" ",g.Zb(5,4,"global.buttons.reload")," "))}var Y,_,P,Z=[{path:"",component:(Y=function(a){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}(b,a);var o,c,i,s=r(b);function b(e,n,r,a,o){var c;return t(this,b),(c=s.call(this,e,n,o)).translateService=e,c.storageService=n,c.studentService=r,c.imageUtilService=a,c.modalService=o,c.globalHeader="global.menu-links.students",c}return o=b,(c=[{key:"ngOnInit",value:function(){this.params=this.params.set("name",""),this.records$=this.loadData(this.params)}},{key:"onDelete",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onSearch",value:function(){this.hasError=!1,this.recordsCount=0;var t=this.queryField.value;t=t||"",this.params=this.params.set("name",t),this.records$=this.loadData(this.params)}},{key:"loadData",value:function(t){var e=this;return this.studentService.findAllByName(t).pipe(Object(u.a)(function(t){return e.recordsCount=t.length,t.map(function(t){e.hasError=!1;var n=new p.a;Object.assign(n,t);var r=d.a.BUCKET_BASE_URL;r+="/".concat(e.imageUtilService.buildFileName(n.getName()),".jpg"),n.setImageUrl(r);var a=document.createElement("img");return a.src=r,a.addEventListener("error",function(){return n.setImageUrl(d.a.DEFAULT_AVATAR_IMG)}),n})}),Object(f.a)(function(){return e.hasError=!0,e.error$.next(!0),e.handleError(e.modalTexts.error.title,e.modalTexts.loading.body),l.a}))}}])&&e(o.prototype,c),i&&e(o,i),b}(m.a),Y.\u0275fac=function(t){return new(t||Y)(g.Jb(h.d),g.Jb(v.a),g.Jb(y.a),g.Jb(O.a),g.Jb(w.a))},Y.\u0275cmp=g.Db({type:Y,selectors:[["app-students-list"]],features:[g.ub],decls:22,vars:14,consts:[[1,"card-box","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[1,"row"],[1,"col-12"],[1,"input-group","mb-3"],["type","text",1,"form-control",3,"formControl","placeholder"],[1,"input-group-append"],["type","button",1,"btn","btn-success",3,"click"],["class","row",4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["class","card-container",4,"ngIf","ngIfElse"],["emptyTemplate",""],[1,"card-container"],[1,"row","row-cols-1","row-cols-md-4"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"col","mb-4"],[1,"card","card-list-item"],[1,"card-header","card-name",3,"title"],["alt","student",1,"m-2","img-fluid",3,"src"],[1,"card-body"],[1,"card-text"],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(t,e){if(1&t&&(g.Ob(0,"article",0),g.Ob(1,"header"),g.Ob(2,"h1",1),g.uc(3),g.Yb(4,"translate"),g.Nb(),g.Nb(),g.Kb(5,"hr"),g.Ob(6,"div",2),g.Ob(7,"div",3),g.Ob(8,"div",4),g.Kb(9,"input",5),g.Yb(10,"translate"),g.Ob(11,"div",6),g.Ob(12,"button",7),g.Vb("click",function(){return e.onSearch()}),g.uc(13),g.Yb(14,"translate"),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Nb(),g.Kb(15,"hr"),g.sc(16,I,5,2,"div",8),g.Yb(17,"async"),g.sc(18,S,2,2,"ng-template",null,9,g.tc),g.sc(20,j,6,6,"ng-template",null,10,g.tc),g.Nb()),2&t){var n=g.kc(19);g.xb(3),g.wc(" ",g.Zb(4,6,e.globalHeader)," "),g.xb(6),g.cc("formControl",e.queryField)("placeholder",g.Zb(10,8,"global.messages.search-for-name")),g.xb(4),g.wc(" ",g.Zb(14,10,"global.buttons.search")," "),g.xb(3),g.cc("ngIf",g.Zb(17,12,e.records$))("ngIfElse",n)}},directives:[s.a,s.o,s.e,i.l,i.k],pipes:[h.c,i.b],encapsulation:2}),Y)}],A=((_=function e(){t(this,e)}).\u0275mod=g.Hb({type:_}),_.\u0275inj=g.Gb({factory:function(t){return new(t||_)},imports:[[b.f.forChild(Z)],b.f]}),_),C=c("tZSt"),J=c("PCNd"),R=((P=function e(){t(this,e)}).\u0275mod=g.Hb({type:P}),P.\u0275inj=g.Gb({factory:function(t){return new(t||P)},imports:[[i.c,A,s.r,s.j,C.a,J.a]]}),P)}}])}();
//# sourceMappingURL=18-es5.a9dd55d0a32850f45bd4.js.map