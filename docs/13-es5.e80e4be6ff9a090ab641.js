!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function r(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var a=c(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"18Gw":function(o,c,a){"use strict";a.r(c),a.d(c,"PersonsModule",function(){return R});var i=a("ofXK"),s=a("tyNb"),b=a("EY2u"),l=a("IzEk"),u=a("eIep"),f=a("lJxs"),d=a("JIr8"),p=a("AytR"),m=a("AqF/"),v=a("XIlG"),g=a("fXoL"),h=a("sYmb"),y=a("n90K"),O=a("xaOb"),x=a("Avbo"),w=a("VQPA");function N(e,t){if(1&e){var n=g.Pb();g.Ob(0,"div",9),g.Ob(1,"div",10),g.Ob(2,"div",11),g.uc(3),g.Nb(),g.Kb(4,"img",12),g.Ob(5,"div",13),g.Ob(6,"p",14),g.uc(7),g.Nb(),g.Nb(),g.Ob(8,"div",15),g.Ob(9,"button",16),g.Vb("click",function(){g.mc(n);var e=t.$implicit;return g.Xb(3).onDelete(e)}),g.uc(10),g.Yb(11,"translate"),g.Nb(),g.Nb(),g.Nb(),g.Nb()}if(2&e){var r=t.$implicit;g.xb(2),g.cc("title",r.getName()),g.xb(1),g.wc(" ",r.getName()," "),g.xb(1),g.cc("src",(null==r?null:r.getImageUrl())||"assets/images/avatar-blank.png",g.oc),g.xb(3),g.wc(" ",r.getEmail()," "),g.xb(3),g.wc(" ",g.Zb(11,5,"global.buttons.delete")," ")}}function E(e,t){if(1&e&&(g.Ob(0,"div",6),g.Ob(1,"div",7),g.sc(2,N,12,7,"div",8),g.Nb(),g.Nb()),2&e){var n=g.Xb().ngIf;g.xb(2),g.cc("ngForOf",n)}}function k(e,t){if(1&e&&(g.Ob(0,"div"),g.sc(1,E,3,1,"div",5),g.Nb()),2&e){var n=g.Xb();g.xb(1),g.cc("ngIf",!n.hasError)}}function I(e,t){1&e&&(g.Ob(0,"span"),g.uc(1),g.Yb(2,"translate"),g.Yb(3,"translate"),g.Nb()),2&e&&(g.xb(1),g.xc(" ",g.Zb(2,2,"global.messages.loading")," ",g.Zb(3,4,"global.menu-links.persons")," ... ["))}function S(e,t){if(1&e&&(g.Ob(0,"div",17),g.sc(1,I,4,6,"span",2),g.Nb()),2&e){var n=g.Xb(),r=g.kc(11);g.xb(1),g.cc("ngIf",!n.hasError)("ngIfElse",r)}}function j(e,t){if(1&e){var n=g.Pb();g.Ob(0,"span"),g.uc(1),g.Yb(2,"translate"),g.Nb(),g.Ob(3,"button",18),g.Vb("click",function(){return g.mc(n),g.Xb().onSearch()}),g.uc(4),g.Yb(5,"translate"),g.Nb()}2&e&&(g.xb(1),g.wc(" ",g.Zb(2,2,"global.messages.system-error")," "),g.xb(3),g.wc(" ",g.Zb(5,4,"global.buttons.reload")," "))}var P,T,A,_=[{path:"",component:(P=function(o){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}(v,o);var c,a,i,s=r(v);function v(t,n,r,o,c){var a;return e(this,v),(a=s.call(this,t,n,c)).translateService=t,a.storageService=n,a.personService=r,a.imageUtilService=o,a.modalService=c,a.globalHeader="global.menu-links.persons",a}return c=v,(a=[{key:"ngOnInit",value:function(){this.loadData()}},{key:"onUpdate",value:function(){}},{key:"onSearch",value:function(){this.hasError=!1,this.loadData()}},{key:"onDelete",value:function(e){var t=this;this.selectedModel=e,this.modalService.showConfirm(this.modalTexts.confirm.title,this.modalTexts.confirm.body).asObservable().pipe(Object(l.a)(1),Object(u.a)(function(n){return n?t.personService.deletePerson(e.getId()):b.a})).subscribe(function(){t.loadData(),t.modalService.showAlertSuccess(t.modalTexts.success.title,t.modalTexts.success.body)},function(){return t.modalService.showAlertDanger(t.modalTexts.error.title,t.modalTexts.error.body)})}},{key:"loadData",value:function(){var e=this;this.records$=this.personService.findAllPersons().pipe(Object(f.a)(function(t){return t.map(function(t){var n=new m.a;Object.assign(n,t),e.hasError=!1;var r=p.a.BUCKET_BASE_URL;r+=e.imageUtilService.buildFileName(n.getName())+".jpg",n.setImageUrl(r);var o=document.createElement("img");return o.src=r,o.addEventListener("error",function(){return n.setImageUrl(p.a.DEFAULT_AVATAR_IMG)}),n})}),Object(d.a)(function(){return e.error$.next(!0),e.hasError=!0,e.handleError(e.modalTexts.error.title,e.modalTexts.loading.body),b.a}))}}])&&t(c.prototype,a),i&&t(c,i),v}(v.a),P.\u0275fac=function(e){return new(e||P)(g.Jb(h.d),g.Jb(y.a),g.Jb(O.a),g.Jb(x.a),g.Jb(w.a))},P.\u0275cmp=g.Db({type:P,selectors:[["app-persons"]],features:[g.ub],decls:12,vars:7,consts:[[1,"card-box","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["class","card-container",4,"ngIf"],[1,"card-container"],[1,"row","row-cols-1","row-cols-md-4"],["class","col mb-4",4,"ngFor","ngForOf"],[1,"col","mb-4"],[1,"card","card-list-item"],[1,"card-header","card-name",3,"title"],["alt","person",1,"img-fluid","border-bottom",3,"src"],[1,"card-body"],[1,"card-text"],[1,"card-footer","p-0"],["type","button",1,"btn","btn-danger","btn-block",3,"click"],[1,"bg-light","p-3","text-center"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(e,t){if(1&e&&(g.Ob(0,"article",0),g.Ob(1,"header"),g.Ob(2,"h1",1),g.uc(3),g.Yb(4,"translate"),g.Nb(),g.Nb(),g.Kb(5,"hr"),g.sc(6,k,2,1,"div",2),g.Yb(7,"async"),g.sc(8,S,2,2,"ng-template",null,3,g.tc),g.sc(10,j,6,6,"ng-template",null,4,g.tc),g.Nb()),2&e){var n=g.kc(9);g.xb(3),g.wc(" ",g.Zb(4,3,t.globalHeader)," "),g.xb(3),g.cc("ngIf",g.Zb(7,5,t.records$))("ngIfElse",n)}},directives:[i.l,i.k],pipes:[h.c,i.b],encapsulation:2}),P)}],D=((T=function t(){e(this,t)}).\u0275mod=g.Hb({type:T}),T.\u0275inj=g.Gb({factory:function(e){return new(e||T)},imports:[[s.f.forChild(_)],s.f]}),T),J=a("PCNd"),R=((A=function t(){e(this,t)}).\u0275mod=g.Hb({type:A}),A.\u0275inj=g.Gb({factory:function(e){return new(e||A)},imports:[[i.c,D,J.a]]}),A)}}])}();
//# sourceMappingURL=13-es5.e80e4be6ff9a090ab641.js.map