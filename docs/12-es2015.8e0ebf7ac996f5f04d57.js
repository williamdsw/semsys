(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{PByI:function(e,t,s){"use strict";s.r(t),s.d(t,"MeetingSchedulesModule",function(){return $});var n=s("ofXK"),c=s("3Pt+"),i=s("tyNb"),l=s("EY2u"),o=s("IzEk"),a=s("eIep"),r=s("lJxs"),b=s("JIr8"),d=s("vakP"),u=s("5soc"),h=s("YNhY"),g=function(e){return e.SCHEDULED="Scheduled",e.FINISHED="Finished",e.CANCELED="Canceled",e}({}),m=s("1w29"),p=s("fXoL"),f=s("sYmb"),w=s("VQPA"),S=s("n90K"),O=s("ej43"),v=s("aSe2");const N=["cancelScheduleButton"],x=["newReportButton"];function y(e,t){if(1&e){const e=p.Pb();p.Ob(0,"div",16),p.Ob(1,"select",8,17),p.Vb("change",function(){p.mc(e);const t=p.kc(2),s=p.Xb(),n=p.kc(15);return s.toggleVisibility(t.value,n.value)}),p.Ob(3,"option",18),p.uc(4),p.Yb(5,"translate"),p.Yb(6,"translate"),p.Nb(),p.Ob(7,"option",19),p.uc(8),p.Yb(9,"translate"),p.Yb(10,"translate"),p.Nb(),p.Nb(),p.Nb()}2&e&&(p.xb(4),p.xc(" ",p.Zb(5,4,"global.other.all")," ",p.Zb(6,6,"global.menu-links.schedules")," "),p.xb(4),p.xc(" ",p.Zb(9,8,"global.other.my")," ",p.Zb(10,10,"global.menu-links.schedules")," "))}function E(e,t){if(1&e&&(p.Ob(0,"option",20),p.uc(1),p.Yb(2,"translate"),p.Nb()),2&e){const e=t.$implicit,s=t.index,n=p.Xb();p.cc("value",e),p.xb(1),p.wc(" ",p.Zb(2,2,n.statusDescriptions[s])," ")}}function I(e,t){if(1&e){const e=p.Pb();p.Ob(0,"div",4),p.Ob(1,"button",21),p.Vb("click",function(){return p.mc(e),p.Xb().showNewMeetingScheduleModal()}),p.uc(2),p.Yb(3,"translate"),p.Nb(),p.Nb()}if(2&e){const e=p.Xb();p.cc("hidden",e.isHidden),p.xb(2),p.wc(" ",p.Zb(3,2,"global.buttons.new-meeting-schedule")," ")}}function k(e,t){if(1&e&&(p.Ob(0,"th",30),p.uc(1),p.Yb(2,"translate"),p.Nb()),2&e){const e=t.$implicit;p.xb(1),p.wc(" ",p.Zb(2,1,e)," ")}}function D(e,t){if(1&e){const e=p.Pb();p.Ob(0,"div"),p.Ob(1,"input",32),p.Vb("click",function(){p.mc(e);const t=p.Xb().$implicit;return p.Xb(3).toggleButtons(t)}),p.Nb(),p.Nb()}}function M(e,t){if(1&e&&(p.Ob(0,"tr"),p.Ob(1,"td",31),p.sc(2,D,2,0,"div",25),p.Nb(),p.Ob(3,"td",31),p.uc(4),p.Nb(),p.Ob(5,"td",31),p.uc(6),p.Nb(),p.Ob(7,"td",31),p.uc(8),p.Nb(),p.Ob(9,"td",31),p.Ob(10,"span"),p.uc(11),p.Yb(12,"translate"),p.Nb(),p.Nb(),p.Nb()),2&e){const e=t.$implicit,s=p.Xb(3);let n=null,c=null;p.xb(2),p.cc("ngIf",s.containsProfile("ADMIN")&&!s.isHidden),p.xb(2),p.wc(" ",e.getDatetime()," "),p.xb(2),p.wc(" ",null==(n=e.getEmployee())?null:n.getName()," "),p.xb(2),p.wc(" ",null==(c=e.getStudent())?null:c.getName()," "),p.xb(2),p.zb(s.setBagdeClass(e.getMeetingStatus())),p.xb(1),p.wc(" ",p.Zb(12,7,s.getTranslatedStatus(e.getMeetingStatus()))," ")}}function Y(e,t){if(1&e&&(p.Ob(0,"div",26),p.Ob(1,"table",27),p.Ob(2,"thead"),p.Ob(3,"tr"),p.sc(4,k,3,3,"th",28),p.Nb(),p.Nb(),p.Ob(5,"tbody"),p.sc(6,M,13,9,"tr",29),p.Nb(),p.Nb(),p.Nb()),2&e){const e=p.Xb().ngIf,t=p.Xb();p.xb(4),p.cc("ngForOf",t.tableHeaders),p.xb(2),p.cc("ngForOf",e)}}function A(e,t){if(1&e){const e=p.Pb();p.Ob(0,"div"),p.Ob(1,"div",33),p.Ob(2,"div",34),p.Ob(3,"button",35,36),p.Vb("click",function(){return p.mc(e),p.Xb(2).onUpdate()}),p.uc(5),p.Yb(6,"translate"),p.Nb(),p.Nb(),p.Ob(7,"div",37),p.Ob(8,"button",38,39),p.Vb("click",function(){return p.mc(e),p.Xb(2).showNewReportModal()}),p.uc(10),p.Yb(11,"translate"),p.Nb(),p.Nb(),p.Nb(),p.Nb()}if(2&e){const e=p.Xb(2);p.xb(1),p.cc("hidden",e.isHidden),p.xb(4),p.wc(" ",p.Zb(6,3,"meeting-schedules.buttons.cancel-schedule")," "),p.xb(5),p.wc(" ",p.Zb(11,5,"global.buttons.new-report")," ")}}function B(e,t){if(1&e&&(p.Ob(0,"div",22),p.Ob(1,"div",23),p.sc(2,Y,7,2,"div",24),p.sc(3,A,12,7,"div",25),p.Nb(),p.Nb()),2&e){const e=t.ngIf,s=p.Xb(),n=p.kc(25);p.xb(2),p.cc("ngIf",!s.hasError&&0!==e.length)("ngIfElse",n),p.xb(1),p.cc("ngIf",s.containsProfile("EMPLOYEE")&&0!==e.length)}}function T(e,t){1&e&&(p.Ob(0,"span"),p.uc(1),p.Yb(2,"translate"),p.Yb(3,"translate"),p.Nb()),2&e&&(p.xb(1),p.xc(" ",p.Zb(2,2,"global.messages.loading")," ",p.Zb(3,4,"global.menu-links.schedules")," ... "))}function P(e,t){if(1&e&&(p.Ob(0,"div",40),p.sc(1,T,4,6,"span",41),p.Nb()),2&e){const e=p.Xb(),t=p.kc(23);p.xb(1),p.cc("ngIf",!e.hasError)("ngIfElse",t)}}function Z(e,t){if(1&e){const e=p.Pb();p.Ob(0,"span"),p.uc(1),p.Yb(2,"translate"),p.Nb(),p.Ob(3,"button",42),p.Vb("click",function(){return p.mc(e),p.Xb().onReload()}),p.uc(4),p.Yb(5,"translate"),p.Nb()}2&e&&(p.xb(1),p.wc(" ",p.Zb(2,2,"global.messages.system-error")," "),p.xb(3),p.wc(" ",p.Zb(5,4,"global.buttons.reload")," "))}function F(e,t){1&e&&(p.Ob(0,"div",40),p.Ob(1,"span"),p.uc(2),p.Yb(3,"translate"),p.Nb(),p.Nb()),2&e&&(p.xb(2),p.wc(" ",p.Zb(3,1,"global.messages.nothing-found")," "))}const X=[{path:"",component:(()=>{class e extends m.a{constructor(e,t,s,n,c){super(e,s,t),this.translateService=e,this.modalService=t,this.storageService=s,this.authenticationService=n,this.meetingScheduleService=c,this.isHidden=!0,this.statusDescriptions=["global.other.all","meeting-schedules.status.scheduled","meeting-schedules.status.finished","meeting-schedules.status.canceled"],this.globalHeader="global.menu-links.schedules",this.modalTexts.confirm.body="meeting-schedules.messages.cancel-confirmation",this.modalTexts.success.body="meeting-schedules.messages.cancel-success",this.modalTexts.error.body="meeting-schedules.messages.cancel-error",this.tableHeaders=["#","meeting-schedules.datetime","meeting-schedules.employee","meeting-schedules.student","meeting-schedules.status.status"],Object.assign(this._localUser,s.getLocalUser())}set cancelScheduleButton(e){this.localCancelScheduleButton=e}set newReportButton(e){this.localNewReportButton=e}ngOnInit(){this.onReload()}onDelete(){}onReload(){this.hasError=!1,this.records$=this.loadData(),this.toggleVisibility("my","")}onUpdate(){this.modalService.showConfirm(this.modalTexts.confirm.title,this.modalTexts.confirm.body).asObservable().pipe(Object(o.a)(1),Object(a.a)(e=>e?(this.selectedModel.setMeetingStatus("Canceled"),this.meetingScheduleService.updateStatus(this.selectedModel)):l.a)).subscribe(()=>{this.records$=this.loadData(this.currentStatus),this.modalService.showAlertSuccess(this.modalTexts.success.title,this.modalTexts.success.body)},()=>this.modalService.showAlertDanger(this.modalTexts.error.title,this.modalTexts.error.body))}loadData(e){return this.currentStatus=e,e?this.pipeFindAll("All"!==e?this.meetingScheduleService.findAllByStatus(e):this.meetingScheduleService.findAll()):"Employee"===this._localUser.getType()?this.pipeFindAll(this.meetingScheduleService.findAllByEmployee(this._localUser.getId())):"Student"===this._localUser.getType()?this.pipeFindAll(this.meetingScheduleService.findAllByStudent(this._localUser.getId())):void 0}pipeFindAll(e){return e.pipe(Object(r.a)(e=>e.map(e=>{this.hasError=!1;let t=new d.a,s=new u.a,n=new h.a;return t=Object.assign(t,e),s=Object.assign(s,t.getEmployee()),n=Object.assign(n,t.getStudent()),t.setEmployee(s),t.setStudent(n),t})),Object(b.a)(()=>(this.hasError=!0,this.error$.next(!0),this.handleError(this.modalTexts.error.title,this.modalTexts.loading.body),l.a)))}setBagdeClass(e){switch(e){case"Finished":return"badge badge-success";case"Canceled":return"badge badge-danger";case"Scheduled":default:return"badge badge-primary"}}toggleButtons(e){this.selectedModel=e,this.localCancelScheduleButton.nativeElement.disabled="Scheduled"!==e.getMeetingStatus(),this.localNewReportButton.nativeElement.disabled="Scheduled"!==e.getMeetingStatus()}listMeetingStatus(){const e=["All"];for(const t in g)g.hasOwnProperty(t)&&e.push(g[t]);return e}toggleVisibility(e,t){this.isHidden="all"===e,"all"===e&&""!==t?this.records$=this.loadData(t):"my"===e&&(this.records$=this.loadData())}filterStatus(e){this.records$=this.loadData(e)}showNewMeetingScheduleModal(){this.modalService.showNewMeetingSchedule().asObservable().pipe(Object(o.a)(1)).subscribe(e=>{e?(this.modalService.showAlertSuccess(this.modalTexts.success.title,"meeting-schedules.messages.scheduled-success"),this.records$=this.loadData()):this.modalService.showAlertDanger(this.modalTexts.error.title,"meeting-schedules.messages.scheduled-error")},()=>this.modalService.showAlertDanger(this.modalTexts.success.title,"meeting-schedules.messages.scheduled-error"))}showNewReportModal(){this.modalService.showNewReport(this.selectedModel).asObservable().pipe(Object(o.a)(1)).subscribe(e=>{e?(this.modalService.showAlertSuccess(this.modalTexts.success.title,"report.messages.report-success"),this.records$=this.loadData()):this.modalService.showAlertDanger(this.modalTexts.error.title,"report.messages.report-error")},()=>this.modalService.showAlertDanger(this.modalTexts.error.title,"report.messages.report-error"))}containsProfile(e){return this.authenticationService.containsProfile(e)}getTranslatedStatus(e){const t="meeting-schedules.status."+e.toLowerCase(),s=this.statusDescriptions.indexOf(t);return this.statusDescriptions[s]}}return e.\u0275fac=function(t){return new(t||e)(p.Jb(f.d),p.Jb(w.a),p.Jb(S.a),p.Jb(O.a),p.Jb(v.a))},e.\u0275cmp=p.Db({type:e,selectors:[["app-meeting-schedules-list"]],viewQuery:function(e,t){if(1&e&&(p.Bc(N,!0),p.Bc(x,!0)),2&e){let e;p.jc(e=p.Wb())&&(t.cancelScheduleButton=e.first),p.jc(e=p.Wb())&&(t.newReportButton=e.first)}},features:[p.ub],decls:26,vars:14,consts:[[1,"table-box","w-100","shadow-lg","mx-auto","my-md-5","my-3"],[1,"mb-3","text-center"],[1,"form-row","mb-3"],["class","col-md-3 col-sm-6 my-md-0 my-2",4,"ngIf"],[1,"col-md-4","col-sm-6","my-md-0","my-2",3,"hidden"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[1,"form-control",3,"change"],["statusCombo",""],[3,"value",4,"ngFor","ngForOf"],["class","col-md-4 col-sm-6 my-md-0 my-2 ",3,"hidden",4,"ngIf"],["class","row",4,"ngIf","ngIfElse"],["spanLoading",""],["spanError",""],["nothingFound",""],[1,"col-md-3","col-sm-6","my-md-0","my-2"],["scheduleCombo",""],["value","all"],["value","my","selected",""],[3,"value"],["type","button",1,"btn","btn-primary","btn-block",3,"click"],[1,"row"],[1,"col-12"],["class","table-responsive",4,"ngIf","ngIfElse"],[4,"ngIf"],[1,"table-responsive"],[1,"table","table-striped","table-bordered"],["scope","col",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["scope","col"],["scope","row"],["type","radio","name","id",1,"custom-radio",3,"click"],[1,"row",3,"hidden"],[1,"col-lg-3","col-md-4","col-sm-6"],["type","button","disabled","",1,"btn","btn-danger","w-100","mt-2",3,"click"],["cancelScheduleButton",""],[1,"col-md-3","col-sm-6"],["type","button","disabled","",1,"btn","btn-primary","w-100","mt-2",3,"click"],["newReportButton",""],[1,"bg-light","p-3","text-center"],[4,"ngIf","ngIfElse"],["type","button",1,"btn","btn-info","mx-1",3,"click"]],template:function(e,t){if(1&e){const e=p.Pb();p.Ob(0,"article",0),p.Ob(1,"header"),p.Ob(2,"h1",1),p.uc(3),p.Yb(4,"translate"),p.Nb(),p.Nb(),p.Kb(5,"hr"),p.Ob(6,"div",2),p.sc(7,y,11,12,"div",3),p.Ob(8,"div",4),p.Ob(9,"div",5),p.Ob(10,"div",6),p.Ob(11,"span",7),p.uc(12),p.Yb(13,"translate"),p.Nb(),p.Nb(),p.Ob(14,"select",8,9),p.Vb("change",function(){p.mc(e);const s=p.kc(15);return t.filterStatus(s.value)}),p.sc(16,E,3,4,"option",10),p.Nb(),p.Nb(),p.Nb(),p.sc(17,I,4,4,"div",11),p.Nb(),p.sc(18,B,4,3,"div",12),p.Yb(19,"async"),p.sc(20,P,2,2,"ng-template",null,13,p.tc),p.sc(22,Z,6,6,"ng-template",null,14,p.tc),p.sc(24,F,4,3,"ng-template",null,15,p.tc),p.Nb()}if(2&e){const e=p.kc(21);p.xb(3),p.wc(" ",p.Zb(4,8,t.globalHeader)," "),p.xb(4),p.cc("ngIf",t.containsProfile("ADMIN")),p.xb(1),p.cc("hidden",!t.isHidden),p.xb(4),p.wc(" ",p.Zb(13,10,"meeting-schedules.current-status")," "),p.xb(4),p.cc("ngForOf",t.listMeetingStatus()),p.xb(1),p.cc("ngIf",t.containsProfile("EMPLOYEE")),p.xb(1),p.cc("ngIf",p.Zb(19,12,t.records$))("ngIfElse",e)}},directives:[n.l,n.k,c.q,c.u],pipes:[f.c,n.b],encapsulation:2}),e})()},{path:"new",component:s("JbS9").a}];let C=(()=>{class e{}return e.\u0275mod=p.Hb({type:e}),e.\u0275inj=p.Gb({factory:function(t){return new(t||e)},imports:[[i.f.forChild(X)],i.f]}),e})();var j=s("tZSt"),H=s("PCNd");let $=(()=>{class e{}return e.\u0275mod=p.Hb({type:e}),e.\u0275inj=p.Gb({factory:function(t){return new(t||e)},imports:[[n.c,C,j.a,c.r,H.a]]}),e})()}}]);
//# sourceMappingURL=12-es2015.8e0ebf7ac996f5f04d57.js.map